{"version":3,"file":"mainApi-88c0b17e.js","sources":["../../src/js/exercises-details.js","../../src/js/services/mainApi.js"],"sourcesContent":["// ! imports\nimport Pagination from 'tui-pagination'; \n// import 'tui-pagination/dist/tui-pagination.min.css';\nimport axios from 'axios';\nimport { hide, show, showLoader, hideLoader } from \"./services/visibility\";\nimport { refs } from './templates/refs.js';\nimport { searchExerciseByFilters } from \"./services/mainApi.js\";\nimport isiToast from './services/isiToast.js';\n// import { exercisesParamFilter, exercisesParamName } from '../exercises'; - wait for push\n// import function, which makes Modal\n\n// ! add listeners\nrefs.searchForm.addEventListener('submit', handleSearch);\n\nconst paginationContainer = document.getElementById('pagination-container');\npaginationContainer.addEventListener('click', handlePagination);\n\n// ! temporarely consts\nconst exercisesParamFilter = \"bodypart\";\n// const exercisesParamFilter = \"muscles\";\n// const exercisesParamFilter = \"equipment\";\nconst exercisesParamName = 'waist';\n// const exercisesParamName = 'barbell';\n\nlet exerciseId;\nlet startButtonFavorite;\n\nconst queryParams = {\n  filter: exercisesParamName,\n  keyword: '',\n  page: 1,\n  limit: 9,\n  totalItems : 0,\n};\n\n// ! work with title\nrefs.exercisesHeader.textContent = `/${exercisesParamName}`;\n\n// ! Function for create modal\nfunction handleStartExerciseByClick(evt) {\n  exerciseId = evt.currentTarget.dataset.id;\n  console.log(exerciseId);\n  // createModal();                       - Maria will give me this name\n  // startExerciseButton.removeEventListener();\n}\n\n// const startExerciseButton = document.querySelector('.to-favorites-start');\n// startExerciseButton.addEventListener('click', handleStartExerciseByClick);\n\n// ! Василина викликає мою функцію renderExerciseByFilter();\nrenderExerciseByFilter();\nasync function renderExerciseByFilter() {\n\n  refs.resultContainer.innerHTML = '';\n\n  show(refs.searchForm)\n  showLoader(refs.loaderModal);\n  \n  queryParams.page = 1;\n\n  if (!queryParams.filter) {\n    isiToast.noResults();\n    show(refs.textResult);\n    hideLoader(refs.loaderModal);\n    return\n  }\n\n  try {\n    const { results, totalPages } = await searchExerciseByFilters(queryParams);\n    console.log(results);\n    console.log(totalPages);\n\n    // there's the same if !queryParams.filter\n    if (!results || totalPages === 0) {\n      isiToast.noResults();\n      show(refs.textResult);\n      hideLoader(refs.loaderModal);\n      return\n    }\n\n    if (totalPages > 1) {\n      const total = queryParams.limit * totalPages;\n      console.log(total);\n      createPagination(total); \n    } else {\n      isiToast.endOfSearch();\n    }\n\n   \n      // ! create markup for the first time or once\n    \n\n    createCardsOfExercises(results, refs.resultContainer);\n    \n    \n    \n  \n  } catch (error) {\n    console.error('Error fetching images:', error);\n    isiToast.apiIsiToastError();\n  } finally {\n    hideLoader(refs.loaderModal);\n    // ! I have to removeListener from another person\n  }\n}\n\n// ! create marcup for a lot of cards and pagination\n// async function createMoreCardsOfExercises() {\n  \n//   show(refs.pagi)\n//   showLoader(refs.loaderModal);\n//   page += 1\n\n//   try {\n//     const { results, totalPages } = await searchExerciseByFilters(queryParams);\n\n//     createCardsOfExercises(results, refs.resultContainer);\n//     console.log(totalPages);\n    \n//     if (page !== totalPages) {\n\n//     } else {\n//       isiToast.endOfSearch();\n//     }\n\n//   } catch (error) {\n//     console.error('Error fetching request:', error);\n//     isiToast.apiIsiToastError();\n//   } finally {\n//     //! refs.resultContainer.innerHTML = '';  need or not\n//     hideLoader(refs.loaderModal);\n\n//     if (queryParams.page === queryParams.totalPages) {\n//       isiToast.endOfSearch();  \n//       refs.pagi.removeEventListener('click', createMoreCardsOfExercises);      \n//     }\n\n//   }\n// }\n\n// ! Works with search button\nasync function handleSearch(event) {\n  event.preventDefault();\n\n  refs.resultContainer.innerHTML = '';\n  \n  queryParams.page = 1;\n\n  const formQuery = event.currentTarget;\n  queryParams.keyword = formQuery.elements.query.value.trim();\n  console.log(queryParams.keyword);\n\n  if (!queryParams.keyword) {\n    isiToast.noQuery();\n    return;\n  }\n\n  try {\n    console.log(queryParams);\n    const { results, totalPages } = await searchExerciseByFilters(queryParams);\n    \n    console.log(results);\n\n    // ! mistake\n\n    let filter;\n    \n    if (exercisesParamFilter === \"bodypart\") {\n      filter = \"bodyPart\";\n    } if (exercisesParamFilter === \"muscles\") {\n      filter = \"target\";\n    } else {\n      filter = \"equipment\"\n    }\n\n    if (exercisesParamFilter === \"bodypart\") {\n      filter = \"bodyPart\";\n    }\n\n    const filteredValues = results.map(result => result[filter]);\n    console.log(filteredValues);\n    const getQuery = (results, toQuery) =>\n    results.filter(result => result.name.includes(toQuery));\n    console.log(getQuery(results, queryParams.keyword)); \n\n    // console.log(results.filter.value);\n    \n    //  if (results || totalPages === 0) {\n    //   isiToast.noResults();\n    //   show(refs.textResult);\n    //   hideLoader(refs.loaderModal);\n    //   return\n    // }\n    createCardsOfExercises(results, refs.resultContainer);\n      \n  } catch (error) {\n    console.error('Error fetching images:', error);\n    isiToast.apiIsiToastError();\n  } finally {\n      refs.searchForm.reset();\n  }\n}\n\nfunction createCardsOfExercises(results, resultContainer) {\n  const markup = results\n    .map(\n      ({ _id, rating, name, burnedCalories, time, bodyPart, target }) => `<li class=\"filtered-card-item\">\n        <div class=\"card-box-workout\">\n          <div class=\"card-box-info\">\n            <div class=\"filtered-workout\">Workout</div>\n            <div class=\"card-box-rating\">\n              <p class=\"filtered-rating\">${Math.round(rating)}</p>\n              <img class=\"filteered-star\" href=\"#\" alt=\"star\" height=\"35\"></img>\n            </div>\n          </div>\n          <button type=\"submit\" data-id=${_id} class=\"to-favorites-start\">Start</button><a/>\n        </div>\n        <div class=\"card-box-title\">\n          <img class=\"filteered-athlete\" href=\"#\" alt=\"athlete\" height=\"35\"></img>\n          <h3 class=\"filteered-title\">${name}</h3>\n        </div>\n        <ul class=\"filtered-description\">\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Burned calories: <spam class=\"filtered-descr-value\">${burnedCalories} / ${time} min</spam></p>\n          </li>\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Body part: <spam class=\"filtered-descr-value\">${bodyPart}</spam></p>\n          </li>\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Target: <spam class=\"filtered-descr-value\">${target}</spam></p>\n          </li>\n        </ul>  \n  </li>\n  `\n    )\n    .join('');\n\n  resultContainer.insertAdjacentHTML('beforeend', markup);\n  \n  const startButtonFavorite = document.querySelector('.to-favorites-start');\n  startButtonFavorite.addEventListener('click', handleStartExerciseByClick);\n  \n}\n\n\n//! Pagination\n\nfunction createPagination(totalPages, total) {\n    const paginationContainer = document.getElementById('pagination-container');\n    \n    // Перевірка на те, чи потрібно створювати пагінацію\n    if (totalPages > 1) {\n        // Створюємо новий екземпляр пагінації\n        const pagination = new Pagination(paginationContainer, {\n            totalItems: total, // Загальна кількість елементів, які будуть розділені по сторінках\n            itemsPerPage: 1, // Кількість елементів на одній сторінці\n            visiblePages: 3, // Кількість видимих сторінок в пагінації\n            page: 1, // Початкова сторінка\n            centerAlign: true, // Вирівнювання пагінації по центру\n            template: {\n                // Налаштування шаблону кнопок пагінації\n                page: '<a class=\"tui-pagination-btn\">{{page}}</a>',\n                currentPage: '<strong class=\"tui-pagination-btn tui-pagination-active\">{{page}}</strong>',\n                moveButton: '<a class=\"tui-pagination-btn tui-pagination-control\"></a>',\n                disabledMoveButton: '<a class=\"tui-pagination-btn tui-pagination-control disabled\"></a>',\n                moreButton: '<a class=\"tui-pagination-btn tui-pagination-ellipsis\" aria-label=\"More\"></a>'\n            }\n        });\n    } else {\n        // Якщо сторінка одна, пагінація не потрібна\n        paginationContainer.innerHTML = ''; // Очищуємо контейнер\n    }\n}\n\nasync function handlePagination (event) {\n    // Перевірити, чи клікнули на кнопку пагінації\n    if (event.target.classList.contains('tui-pagination-btn')) {\n        // Отримати номер сторінки, на яку клікнули\n      const pageNum = parseInt(event.target.textContent);\n      console.log(pageNum);\n        \n        // Оновити параметр page у queryParams\n        queryParams.page = pageNum;\n\n        // Викликати функцію renderExerciseByFilter з оновленими параметрами\n        await renderExerciseByFilter();\n    }\n}\n\n\n\n\nexport { renderExerciseByFilter };\nexport { exerciseId };\n  \n// ! will delete in future\nexport {exercisesParamFilter, exercisesParamName }\n","import axios from 'axios';\nimport { exercisesParamFilter, exercisesParamName } from '../exercises-details';\n// import { exercisesParamFilter, exercisesParamName } from '../exercises';\n\nconst BASE_URL = 'https://energyflow.b.goit.study/api';\n\nconst ENDPOINT_QUOTE = 'quote';\nconst ENDPOINT_FILTER = 'exercises';\n\nasync function fetchQuoteFromServer() {\n  try {\n    const response = await axios.get(`${BASE_URL}/${ENDPOINT_QUOTE}`);\n    return response.data;\n  } catch (error) {\n    console.log(error);\n    throw error;\n  }\n}\n\nasync function searchExerciseByFilters({ keyword, page = 1, limit }) {\n  const response = await axios\n  .get(`https://energyflow.b.goit.study/api/exercises`, {\n    params: { \n      [exercisesParamFilter]: exercisesParamName,\n        keyword: keyword,\n        limit,\n        page,\n          },\n      })\n  return response.data;\n}\n\nasync function searchExerciseByID(id) {\n  try {\n    const  { data }  = await axios.get(`${BASE_URL}/${ENDPOINT_FILTER}/${id}`);\n    return data;\n  } catch (err) {\n    console.error(err);\n  }\n}\n\nexport { fetchQuoteFromServer, searchExerciseByFilters, searchExerciseByID };\n\n\n"],"names":["refs","handleSearch","paginationContainer","handlePagination","exercisesParamFilter","exercisesParamName","exerciseId","queryParams","handleStartExerciseByClick","evt","renderExerciseByFilter","show","showLoader","isiToast","hideLoader","results","totalPages","searchExerciseByFilters","total","createPagination","createCardsOfExercises","error","event","formQuery","filter","filteredValues","result","toQuery","resultContainer","markup","_id","rating","name","burnedCalories","time","bodyPart","target","Pagination","pageNum","BASE_URL","ENDPOINT_QUOTE","ENDPOINT_FILTER","fetchQuoteFromServer","axios","keyword","page","limit","searchExerciseByID","id","data","err"],"mappings":"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"}