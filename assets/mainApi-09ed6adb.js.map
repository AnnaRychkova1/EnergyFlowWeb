{"version":3,"file":"mainApi-09ed6adb.js","sources":["../../src/js/exercises.js","../../src/js/services/mainApi.js"],"sourcesContent":["import { getExercisesByFilter } from './services/mainApi';\n\nimport { refs } from './templates/refs.js';\nimport { renderExerciseByFilter } from './exercises-details';\n\nlet filterDefault = 'Muscles';\nlet currentPage = 1;\nlet currentLimit = 0;\nlet screenWidth = window.innerWidth;\nlet exercisesParamFilter;\nlet exercisesParamName;\n\nconst queryParams = {\n  filter: filterDefault,\n  page: currentPage,\n  limit: currentLimit,\n};\n\nrefs.exercisesBtnEl.addEventListener('click', filterBtnExercises);\nrefs.paginationEl.addEventListener('click', onPaginationPages);\n\nif (screenWidth <= 375) {\n  currentLimit = 8;\n} else if (screenWidth <= 768) {\n  currentLimit = 12;\n} else {\n  currentLimit = 12;\n}\n\nasync function fetchDefaultMuscles() {\n  try {\n    const { results, page, totalPages } = await getExercisesByFilter(\n      queryParams\n    );\n    if (results && results.length > 0) {\n      createExercisesByFilterMarkup(results);\n      refs.paginationEl.innerHTML = pagesPagination(page, totalPages);\n    } else {\n      console.error('No results found for this filter');\n    }\n  } catch (error) {\n    console.log('Error fetching images:', error);\n  }\n}\n\nfetchDefaultMuscles();\n\nasync function filterBtnExercises(event) {\n  event.preventDefault();\n\n  const query = event.target.dataset.filter;\n  refs.exercisesGalleryEl.innerHTML = '';\n  console.log(query);\n  filterDefault = query;\n  currentPage = 1;\n\n  if (event.target === event.currentTarget) {\n    return;\n  }\n\n  try {\n    const { results, page, totalPages } = await getExercisesByFilter(\n      queryParams\n    );\n    createExercisesByFilterMarkup(results);\n\n    if (totalPages > 1) {\n      refs.paginationEl.innerHTML = pagesPagination(page, totalPages);\n    } else {\n      refs.paginationEl.innerHTML = '';\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction createExercisesByFilterMarkup(results) {\n  const markup = results\n    .map(\n      ({ name, filter, imgUrl }) =>\n        `<li class=\"exercises-gallery-item\" data-filter>\n        <img class=\"exercises-gallery-img\" src=\"${imgUrl}\" alt=\"${filter}\">\n        <div class=\"exercises-gallery-text\">\n          <h3 class=\"exercises-gallery-title\">${name}</h3>\n          <p class=\"exercises-gallery-filter\">${filter}</p>\n        </div>\n        </li>`\n    )\n    .join('');\n  refs.exercisesGalleryEl.insertAdjacentHTML('beforeend', markup);\n  // const exercisesGalleryItem = document.querySelectorAll(\n  //   '.exercises-gallery-item'\n  // );\n  // exercisesGalleryItem.addEventListener('click', handleExercisesItemClick());\n}\n\nfunction pagesPagination(page, totalPages) {\n  let disabledMoveButton = '';\n  for (let i = 1; i <= totalPages; i++) {\n    disabledMoveButton += `<button class=\"button-pagination\" type=\"button\">${i}</button>`;\n  }\n  return disabledMoveButton;\n}\n\n// ===  Функція перехід по сторінкам\n\nasync function onPaginationPages(event) {\n  currentPage = event.target.textContent;\n  refs.exercisesGalleryEl.innerHTML = '';\n  try {\n    const { results, page, totalPages } = await getExercisesByFilter(\n      queryParams\n    );\n    const filter = results[0].filter;\n\n    if (page === totalPages) {\n      return;\n    }\n    createExercisesByFilterMarkup(results);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n// function handleExercisesItemClick(event) {\n//   exercisesParamFilter = event.target.dataset.filter;\n//   console.log(exercisesParamFilter);\n//   renderExerciseByFilter();\n//   // вимнути слухач!!!!\n// }\n\nexport { filterDefault, currentPage, currentLimit };\nexport { exercisesParamFilter, exercisesParamName };\n","import axios from 'axios';\nimport { exercisesParamFilter, exercisesParamName } from '../exercises';\n//import { exerciseId } from '../exercises-details';\nimport { filterDefault, currentPage, currentLimit } from '../exercises';\n\n\nconst BASE_URL = 'https://energyflow.b.goit.study/api';\n\nconst ENDPOINT_QUOTE = 'quote';\nconst ENDPOINT_FILTER = 'exercises';\nconst ENDPOINT_EXERCISES = 'filters';\n\nasync function fetchQuoteFromServer() {\n  try {\n    const response = await axios.get(`${BASE_URL}/${ENDPOINT_QUOTE}`);\n    return response.data;\n  } catch (error) {\n    console.log(error);\n    throw error;\n  }\n}\n\nasync function searchExerciseByFilters({ keyword, page = 1, limit }) {\n  const response = await axios.get(\n    `${BASE_URL}/${ENDPOINT_FILTER}`,\n    {\n      params: {\n        [filterDefault]: nameExercise,\n        keyword: keyword,\n        limit,\n        page,\n      },\n    }\n  );\n  return response.data;\n}\n\nasync function getExercisesByFilter() {\n  try {\n    const response = await axios.get(`${BASE_URL}/${ENDPOINT_EXERCISES}`, {\n      params: {\n        filter: filterDefault,\n        page: currentPage,\n        limit: currentLimit,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function searchExerciseByID(id) {\n  try {\n    const { data } = await axios.get(`${BASE_URL}/${ENDPOINT_FILTER}/${exerciseId}`);\n    return data;\n  } catch (err) {\n    console.error(err);\n  }\n}\n\nexport {\n  fetchQuoteFromServer,\n  searchExerciseByFilters,\n  searchExerciseByID,\n  getExercisesByFilter,\n};"],"names":["filterDefault","currentPage","currentLimit","screenWidth","exercisesParamFilter","exercisesParamName","queryParams","refs","filterBtnExercises","onPaginationPages","fetchDefaultMuscles","results","page","totalPages","getExercisesByFilter","createExercisesByFilterMarkup","pagesPagination","error","event","query","markup","name","filter","imgUrl","disabledMoveButton","i","BASE_URL","ENDPOINT_QUOTE","ENDPOINT_FILTER","ENDPOINT_EXERCISES","fetchQuoteFromServer","axios","searchExerciseByFilters","keyword","limit","searchExerciseByID","id","data","err"],"mappings":"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"}