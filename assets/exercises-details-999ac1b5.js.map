{"version":3,"file":"exercises-details-999ac1b5.js","sources":["../../src/js/exercises-details.js"],"sourcesContent":["import axios from 'axios';\nimport icons from '/assets/symbol-defs.svg';\nimport { renderModalMenu } from '/js/modal-menu.js';\nimport { refs } from '/js/templates/refs.js';\nimport { hide, show, hideLoader, showLoader } from '/js/services/visibility.js';\nimport { onPaginationClick, pagesPagination } from '/js/services/pagination.js';\nimport { scrollTo } from '/js/services/scrollTo.js';\nimport { errorResult } from '/js/services/iziToast.js';\n\nconst BASE_URL = 'https://energyflow.b.goit.study/api';\nconst ENDPOINT_EXERCISES = 'exercises';\n\nconst screenWidth = window.innerWidth;\n\nlet page = 1;\nlet filter = '';\nlet currentLimit;\nlet getParams = {\n  keyword: '',\n  page: page,\n  limit: currentLimit,\n};\n\nif (screenWidth < 1440) {\n  currentLimit = 8;\n} else {\n  currentLimit = 9;\n}\n\nif (refs.subexercisesSearchForm) {\n  refs.subexercisesSearchForm.addEventListener('submit', handleSearch);\n}\n\nif (refs.paginationEl) {\n  refs.paginationEl.addEventListener(\n    'click',\n    onPaginationClick(\n      renderCards,\n      searchExerciseByFilters,\n      getParams,\n      refs.subexercisesFilteredCards,\n      'second-pagination'\n    )\n  );\n}\n\nasync function renderExerciseByFilterName(expectedFilter, expectedName) {\n  if (!expectedFilter || !expectedName) {\n    show(refs.subexercisesTextNoFound);\n    return;\n  }\n\n  getParams = {\n    keyword: '',\n    page: page,\n    limit: currentLimit,\n  };\n\n  if (expectedFilter === 'Body parts') {\n    filter = 'bodypart';\n  } else if (expectedFilter === 'Muscles') {\n    filter = 'muscles';\n  } else if (expectedFilter === 'Equipment') {\n    filter = 'equipment';\n  }\n\n  getParams[filter] = expectedName;\n\n  hide(refs.subexercisesTextNoFound);\n  show(refs.subexercisesSearchForm);\n  show(refs.subexercisesFilteredCards);\n  show(refs.exercisesSubtitle);\n  refs.exercisesSubtitle.textContent = `${expectedName}`;\n  refs.subexercisesFilteredCards.innerHTML = '';\n  refs.paginationEl.innerHTML = '';\n  refs.exercisesGalleryEl.innerHTML = '';\n  refs.paginationEl.classList.add('second-pagination');\n  refs.paginationEl.classList.remove('first-pagination');\n\n  showLoader(refs.loaderModal);\n  try {\n    const { results, totalPages } = await searchExerciseByFilters(page);\n\n    if (totalPages > 1) {\n      refs.paginationEl.innerHTML = pagesPagination(page, totalPages);\n    }\n\n    if (results && results.length > 0) {\n      renderCards(results);\n    } else {\n      show(refs.subexercisesTextNoFound);\n      return;\n    }\n\n    scrollTo(refs.exercisesContainerEl);\n  } catch (error) {\n    errorResult('Server Exercises By Filter did not responded');\n  } finally {\n    hideLoader(refs.loaderModal);\n  }\n}\n\nasync function handleSearch(evt) {\n  evt.preventDefault();\n\n  const formData = evt.currentTarget;\n  getParams.keyword = formData.query.value.trim();\n\n  if (!getParams.keyword) {\n    errorResult('Input keyword');\n  }\n\n  show(refs.subexercisesSearchForm);\n  hide(refs.subexercisesTextNoFound);\n  refs.subexercisesFilteredCards.innerHTML = '';\n  refs.paginationEl.innerHTML = '';\n  refs.exercisesGalleryEl.innerHTML = '';\n\n  showLoader(refs.loaderModal);\n  try {\n    const { results, totalPages } = await searchExerciseByFilters(page);\n\n    if (totalPages > 1) {\n      refs.paginationEl.innerHTML = pagesPagination(page, totalPages);\n    }\n\n    if (results && results.length > 0) {\n      renderCards(results);\n    } else {\n      show(refs.subexercisesTextNoFound);\n      return;\n    }\n    scrollTo(refs.exercisesContainerEl);\n  } catch (error) {\n    errorResult('Server Exercises By Query did not responded');\n  } finally {\n    hideLoader(refs.loaderModal);\n    refs.subexercisesSearchForm.reset();\n  }\n}\n\nif (refs.subexercisesFilteredCards) {\n  refs.subexercisesFilteredCards.addEventListener(\n    'click',\n    handleClickOnCardStart\n  );\n}\n\n// request to modal window\nfunction handleClickOnCardStart(evt) {\n  if (!evt.target.dataset.id) {\n    return;\n  }\n  const exerciseId = evt.target.dataset.id;\n  renderModalMenu(exerciseId);\n}\n\n// request to server\nasync function searchExerciseByFilters(page) {\n  const response = await axios.get(`${BASE_URL}/${ENDPOINT_EXERCISES}`, {\n    params: { ...getParams, page },\n  });\n  return response.data;\n}\n\n// renderCards\nfunction renderCards(results) {\n  refs.exercisesGalleryEl.innerHTML = '';\n  const markup = results.map(result => createCard(result)).join('');\n  refs.subexercisesFilteredCards.innerHTML = markup;\n}\n\n// create Card\nfunction createCard({\n  _id,\n  rating,\n  name,\n  burnedCalories,\n  time,\n  bodyPart,\n  target,\n}) {\n  return `<li class=\"filtered-card-item\">\n        <div class=\"card-box-workout\">\n\n          <div class=\"card-box-info\">\n            <div class=\"filtered-workout\">Workout</div>\n            <div class=\"card-box-rating\">\n              <p class=\"filtered-rating\">${rating.toFixed(1)}</p>\n              <svg class=\"filtered-star\" width=\"16\" height=\"16\">\n                <use href=\"${icons}#icon-Star-1\"></use>\n              </svg>\n            </div>\n          </div>\n\n          <button class=\"to-favorites-start\" type=\"click\" data-id=${_id}>\n            <span data-id=${_id}>Start</span>\n            <svg data-id=${_id} class=\"filtered-start\" width=\"16\" height=\"16\">\n              <use href=\"${icons}#icon-arrow-right\"></use>\n            </svg>\n          </button>\n\n        </div>\n\n        <div class=\"card-box-title\">\n          <div class=\"filtered-athlete-box\">\n            <svg class=\"filtered-athlete\" width=\"16\" height=\"16\">\n              <use href=\"${icons}#icon-Man\"></use>\n            </svg>\n          </div>\n          <h3 class=\"filtered-title\">${name}</h3>\n        </div>\n\n        <ul class=\"filtered-description\">\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Burned calories: <span class=\"filtered-descr-value\">${burnedCalories} / ${time} min</span></p>\n          </li>\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Body part: <span class=\"filtered-descr-value\">${\n              bodyPart.charAt(0).toUpperCase() + bodyPart.slice(1)\n            }</span></p>\n          </li>\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Target: <span class=\"filtered-descr-value\">${\n              target.charAt(0).toUpperCase() + target.slice(1)\n            }</span></p>\n          </li>\n        </ul>\n  </li>`;\n}\n\nexport { renderExerciseByFilterName, handleSearch };\n"],"names":["BASE_URL","ENDPOINT_EXERCISES","screenWidth","page","filter","currentLimit","getParams","refs","handleSearch","onPaginationClick","renderCards","searchExerciseByFilters","renderExerciseByFilterName","expectedFilter","expectedName","show","hide","showLoader","results","totalPages","pagesPagination","scrollTo","errorResult","hideLoader","evt","formData","handleClickOnCardStart","exerciseId","renderModalMenu","axios","markup","result","createCard","_id","rating","name","burnedCalories","time","bodyPart","target","icons"],"mappings":"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"}