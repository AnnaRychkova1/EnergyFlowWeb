{"version":3,"file":"exercises-details-82f5cdc4.js","sources":["../../src/js/exercises-details.js"],"sourcesContent":["import axios from 'axios';\nimport { hide, show, showLoader, hideLoader } from \"./services/visibility\"\n\nconst BASE_URL = 'https://energyflow.b.goit.study/api';\nconst END_POINT = 'exercises';\n\n// https://energyflow.b.goit.study/api/exercises?bodypart=waist&muscles=abs&equipment=assisted&keyword=side&page=1&limit=10\n\n// import { filterExercise, nameExercise} from './exercises';\n\nconst filterExercise = 'bodypart';\nconst nameExercise = 'waist';\n\nconst queryParams = {\n  filter: nameExercise,\n  keyword: '',\n  page: 1,\n  limit: 9,\n};\n\nconst refs = {\n  exercisesHeader: document.querySelector('.exersises-header'),\n  resultContainer: document.querySelector('.filtered-cards'),\n  searchForm: document.querySelector('.form'),\n  searchBtn: document.querySelector('.search-btn'),\n  textResult: document.querySelector('.exercise-text-no-found'),\n  loaderModal: document.querySelector('.overlay'),\n}\n\n\nrefs.exercisesHeader.textContent = `/${nameExercise}`;\nrefs.textResult.classList.add(\"is-hidden\");\nrenderExerciseByFilter();\n\nasync function renderExerciseByFilter(evt) {\n\n  try {\n    const { results, totalPages } = await searchExerciseByFilters(queryParams);\n    console.log(results);\n    console.log(totalPages);\n    \n    // if (results.length > 0 && results.length !== totalPages) {\n    //   refs.loadMoreBtn.addEventListener('click', handleLoadMore);\n    //   buttonService.show(refs.loadMoreBtn);\n    // } else {\n    //   isiToast.endOfSearch();\n    //   buttonService.hide(refs.loadMoreBtn);\n    //   buttonService.enableBtn(refs.searchBtn);\n    // }\n\n      renderItemsMarkup(results, refs.resultContainer);\n      // const lightbox = new SimpleLightbox('.filtered-cards a', {\n      //     captionsData: 'alt',\n      //     captionDelay: 250,\n      // });\n\n      // lightbox.refresh();\n      \n  } catch (error) {\n    console.error('Error fetching images:', error);\n    alert('Wrong request')\n  } finally {\n      \n  }\n}\n\n\n\n\n\nrefs.searchForm.addEventListener('submit', handleSearch);\nrefs.resultContainer.innerHTML = '';\n\n\nasync function handleSearch(event) {\n  event.preventDefault();\n\n  refs.resultContainer.innerHTML = '';\n  \n  queryParams.page = 1;\n\n  const formQuery = event.currentTarget;\n    queryParams.keyword = formQuery.elements.query.value.trim();\n    console.log(queryParams.keyword);\n\n  if (!queryParams.keyword) {\n    alert('Empty value')\n    return;\n  }\n\n  try {\n    console.log(queryParams);\n      const { results, totalPages } = await searchExerciseByFilters(queryParams);\n\n    const getQuery = (results, toQuery) =>\n    results.filter(result => result.name.includes(toQuery));\n\n      console.log(getQuery(results, queryParams.keyword)); \n      \n\nconsole.log(totalPages);\n    // if (results.length > 0 && results.length !== totalPages) {\n    //   refs.loadMoreBtn.addEventListener('click', handleLoadMore);\n    //   buttonService.show(refs.loadMoreBtn);\n    // } else {\n    //   isiToast.endOfSearch();\n    //   buttonService.hide(refs.loadMoreBtn);\n    //   buttonService.enableBtn(refs.searchBtn);\n      // }\n\n      renderItemsMarkup(results, refs.resultContainer);\n      // const lightbox = new SimpleLightbox('.filtered-cards a', {\n      //     captionsData: 'alt',\n      //     captionDelay: 250,\n      // });\n\n      // lightbox.refresh();\n      \n  } catch (error) {\n    console.error('Error fetching images:', error);\n    alert('Wrong request')\n  } finally {\n      refs.searchForm.reset();\n  }\n}\n\nfunction renderItemsMarkup(results, resultContainer ) {\n  const markup = results\n    .map(\n      ({ _id, rating, name, burnedCalories, time, bodyPart, target }) => `<li class=\"filtered-card-item\">\n        <div class=\"card-box-workout\">\n          <div class=\"card-box-info\">\n            <div class=\"filtered-workout\">Workout</div>\n            <div class=\"card-box-rating\">\n              <p class=\"filtered-rating\">${Math.round(rating)}</p>\n              <img class=\"filteered-star\" href=\"#\" alt=\"star\" height=\"35\"></img>\n            </div>\n          </div>\n          <button data-id=${_id} class=\"to-favorites-start\">Start</button><a/>\n        </div>\n        <div class=\"card-box-title\">\n          <img class=\"filteered-athlete\" href=\"#\" alt=\"athlete\" height=\"35\"></img>\n          <h3 class=\"filteered-title\">${name}</h3>\n        </div>\n        <ul class=\"filtered-description\">\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Burned calories: <spam class=\"filtered-descr-value\">${burnedCalories} / ${time} min</spam></p>\n          </li>\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Body part: <spam class=\"filtered-descr-value\">${bodyPart}</spam></p>\n          </li>\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Target: <spam class=\"filtered-descr-value\">${target}</spam></p>\n          </li>\n        </ul>  \n  </li>\n  `\n    )\n    .join('');\n\n  resultContainer.insertAdjacentHTML('beforeend', markup);\n}\n\nasync function searchExerciseByFilters({ page = 1, limit }) {\n  const response = await axios\n      .get(`${BASE_URL}/${END_POINT}?${filterExercise}=${nameExercise}`, {\n        params: { \n        keyword: queryParams.keyword,\n        limit,\n        page,\n          },\n      })\n  return response.data;\n}"],"names":["BASE_URL","END_POINT","filterExercise","nameExercise","queryParams","refs","renderExerciseByFilter","evt","results","totalPages","searchExerciseByFilters","renderItemsMarkup","error","handleSearch","event","formQuery","toQuery","result","resultContainer","markup","_id","rating","name","burnedCalories","time","bodyPart","target","page","limit","axios"],"mappings":"yCAGA,MAAMA,EAAW,sCACXC,EAAY,YAMZC,EAAiB,WACjBC,EAAe,QAEfC,EAAc,CAClB,OAAQD,EACR,QAAS,GACT,KAAM,EACN,MAAO,CACT,EAEME,EAAO,CACX,gBAAiB,SAAS,cAAc,mBAAmB,EAC3D,gBAAiB,SAAS,cAAc,iBAAiB,EACzD,WAAY,SAAS,cAAc,OAAO,EAC1C,UAAW,SAAS,cAAc,aAAa,EAC/C,WAAY,SAAS,cAAc,yBAAyB,EAC5D,YAAa,SAAS,cAAc,UAAU,CAChD,EAGAA,EAAK,gBAAgB,YAAc,IAAIF,CAAY,GACnDE,EAAK,WAAW,UAAU,IAAI,WAAW,EACzCC,IAEA,eAAeA,EAAuBC,EAAK,CAEzC,GAAI,CACF,KAAM,CAAE,QAAAC,EAAS,WAAAC,CAAU,EAAK,MAAMC,EAAwBN,CAAW,EACzE,QAAQ,IAAII,CAAO,EACnB,QAAQ,IAAIC,CAAU,EAWpBE,EAAkBH,EAASH,EAAK,eAAe,CAQlD,OAAQO,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7C,MAAM,eAAe,CACzB,QAAY,CAET,CACH,CAMAP,EAAK,WAAW,iBAAiB,SAAUQ,CAAY,EACvDR,EAAK,gBAAgB,UAAY,GAGjC,eAAeQ,EAAaC,EAAO,CACjCA,EAAM,eAAc,EAEpBT,EAAK,gBAAgB,UAAY,GAEjCD,EAAY,KAAO,EAEnB,MAAMW,EAAYD,EAAM,cAIxB,GAHEV,EAAY,QAAUW,EAAU,SAAS,MAAM,MAAM,OACrD,QAAQ,IAAIX,EAAY,OAAO,EAE7B,CAACA,EAAY,QAAS,CACxB,MAAM,aAAa,EACnB,MACD,CAED,GAAI,CACF,QAAQ,IAAIA,CAAW,EACrB,KAAM,CAAE,QAAAI,EAAS,WAAAC,CAAU,EAAK,MAAMC,EAAwBN,CAAW,EAKzE,QAAQ,KAHO,CAACI,EAASQ,IAC3BR,EAAQ,OAAOS,GAAUA,EAAO,KAAK,SAASD,CAAO,CAAC,GAE/BR,EAASJ,EAAY,OAAO,CAAC,EAGxD,QAAQ,IAAIK,CAAU,EAUhBE,EAAkBH,EAASH,EAAK,eAAe,CAQlD,OAAQO,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7C,MAAM,eAAe,CACzB,QAAY,CACNP,EAAK,WAAW,OACnB,CACH,CAEA,SAASM,EAAkBH,EAASU,EAAkB,CACpD,MAAMC,EAASX,EACZ,IACC,CAAC,CAAE,IAAAY,EAAK,OAAAC,EAAQ,KAAAC,EAAM,eAAAC,EAAgB,KAAAC,EAAM,SAAAC,EAAU,OAAAC,CAAM,IAAO;AAAA;AAAA;AAAA;AAAA;AAAA,2CAK9B,KAAK,MAAML,CAAM,CAAC;AAAA;AAAA;AAAA;AAAA,4BAIjCD,CAAG;AAAA;AAAA;AAAA;AAAA,wCAISE,CAAI;AAAA;AAAA;AAAA;AAAA,kGAIsDC,CAAc,MAAMC,CAAI;AAAA;AAAA;AAAA,4FAG9BC,CAAQ;AAAA;AAAA;AAAA,yFAGXC,CAAM;AAAA;AAAA;AAAA;AAAA,GAK1F,EACA,KAAK,EAAE,EAEVR,EAAgB,mBAAmB,YAAaC,CAAM,CACxD,CAEA,eAAeT,EAAwB,CAAE,KAAAiB,EAAO,EAAG,MAAAC,CAAK,EAAI,CAS1D,OARiB,MAAMC,EAClB,IAAI,GAAG7B,CAAQ,IAAIC,CAAS,IAAIC,CAAc,IAAIC,CAAY,GAAI,CACjE,OAAQ,CACR,QAASC,EAAY,QACrB,MAAAwB,EACA,KAAAD,CACG,CACX,CAAO,GACW,IAClB"}