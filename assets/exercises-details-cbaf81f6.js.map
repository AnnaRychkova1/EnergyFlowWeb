{"version":3,"file":"exercises-details-cbaf81f6.js","sources":["../../src/js/exercises-details.js"],"sourcesContent":["// ! imports\nimport axios from 'axios';\nimport { hide, show, showLoader, hideLoader } from './services/visibility';\nimport { refs } from './templates/refs.js';\nimport isiToast from './services/isiToast.js';\n// import { exercisesParamFilter, exercisesParamName } from '../exercises'; - wait for push\n// import { getCardInfo } from './modal-menu.js';\n\nconst BASE_URL = 'https://energyflow.b.goit.study/api';\nconst ENDPOINT_EXERCISES = 'exercises';\n\n// ! add listeners\nrefs.searchForm.addEventListener('submit', handleSearch); // спочатку відкрити, потім закрити, по днфолту в нього має бути клас хіден\n// refs.containerFilteredCards // mine div for all exept form - спочатку відкрити, потім закрити, по днфолту в нього має бути клас хіден\nrefs.resultContainer.addEventListener('click', handleClickOnCardStart)\n\n// ! temporarely consts\n// const exercisesParamFilter = \"bodypart\";\n// const exercisesParamFilter = \"muscles\";\n// const exercisesParamFilter = \"equipment\";\n// const exercisesParamName = 'waist';\n// const exercisesParamName = 'barbell';\n\n// const getParams = {\n//     filter: exercisesParamName,\n//     keyword: '',\n//     page: 1,\n//     limit: 9,\n// };\n\n// ! work with title Vasilina\n// refs.exercisesHeader.textContent = `/${exercisesParamName}`;\n\n// ! Василина викликає мою функцію renderExerciseByFilterName();\nrenderExerciseByFilterName(exercisesParamFilter, exercisesParamName);\n// renderExerciseByFilterName();\n\nasync function renderExerciseByFilterName() {\n\n    show(refs.containerFilteredCards);\n    show(refs.searchForm);\n    showLoader(refs.loaderModal);\n\n    // ! має появитися частинка заголовка, але не я, а Василина\n    // ! need or not\n    // refs.resultContainer.innerHTML = '';\n\n    // ! need or not\n    if (!exercisesParamFilter || !exercisesParamName) {\n        isiToast.noResults();\n        show(refs.textResult);\n        hideLoader(refs.loaderModal);\n        return;\n    }\n\n    try {\n        const { results, totalPages } = await searchExerciseByFilters(getParams);\n        console.log(results);\n        console.log(totalPages);\n\n        if (!results || totalPages === 0) {\n            isiToast.noResults();\n            show(refs.textResult);\n            hideLoader(refs.loaderModal);\n            return;\n        }\n\n        // ! create markup for the first time or once\n\n        let markup = '';\n        for (const result of results) {\n            markup += createCardsOfExercises(result);\n        }\n        refs.resultContainer.innerHTML = markup;\n\n        // !  change number of pages\n        getParams.page += 1\n\n        if (totalPages > 1) {\n            // ! Pagination start\n            // createPagination();\n        }\n\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        isiToast.apiIsiToastError();\n    } finally {\n        hideLoader(refs.loaderModal);\n        // hide(paginationContainer);\n        // ! I have to removeListener from another person or not\n    }\n}\n\n\n// ! Works with search button\n\nasync function handleSearch(evt) {\n\n    evt.preventDefault();\n    refs.resultContainer.innerHTML = '';\n    getParams.page = 1;\n\n    const inputKeyword = evt.currentTarget;\n    getParams.keyword = inputKeyword.elements.exercise.value.trim();\n    console.log(getParams.keyword)\n\n    try {\n        const { results, totalPages } = await searchExerciseByFilters(getParams);\n\n        if (!getParams.keyword) {\n            isiToast.noResults();\n            show(refs.textResult);\n            hideLoader(refs.loaderModal);\n            return\n        }\n\n\n        // ! create markup for the first time or once\n\n        let markupFilteredCards = '';\n        for (const result of results) {\n            markupFilteredCards += createCardsOfExercises(result);\n        }\n        refs.resultContainer.innerHTML = markupFilteredCards;\n\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        isiToast.apiIsiToastError();\n    } finally {\n        refs.searchForm.reset();\n        hide(paginationContainer);\n    }\n}\n\n// ! Create markup\n\nfunction createCardsOfExercises({ _id, rating, name, burnedCalories, time, bodyPart, target }) {\n    return `<li class=\"filtered-card-item\">\n        <div class=\"card-box-workout\">\n          <div class=\"card-box-info\">\n            <div class=\"filtered-workout\">Workout</div>\n            <div class=\"card-box-rating\">\n              <p class=\"filtered-rating\">${Math.round(rating)}</p>\n              <img class=\"filteered-star\" href=\"#\" alt=\"star\" height=\"35\"></img>\n            </div>\n          </div>\n          <button type=\"submit\" data-id=${_id} class=\"to-favorites-start\">Start</button><a/>\n        </div>\n        <div class=\"card-box-title\">\n          <img class=\"filteered-athlete\" href=\"#\" alt=\"athlete\" height=\"35\"></img>\n          <h3 class=\"filteered-title\">${name}</h3>\n        </div>\n        <ul class=\"filtered-description\">\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Burned calories: <spam class=\"filtered-descr-value\">${burnedCalories} / ${time} min</spam></p>\n          </li>\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Body part: <spam class=\"filtered-descr-value\">${bodyPart}</spam></p>\n          </li>\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Target: <spam class=\"filtered-descr-value\">${target}</spam></p>\n          </li>\n        </ul>  \n  </li>\n  `;\n}\n\n// ! Function for create modal  Створити делегування подій на лішку\n\n\nfunction handleClickOnCardStart(evt) {\n    showLoader(refs.loaderModal);\n    const exerciseId = evt.target.dataset.id;\n    getCardInfo(exerciseId);\n}\n\n// ! Api Function\n\nasync function searchExerciseByFilters({ keyword, limit }) {\n    const response = await axios.get(\n        `${BASE_URL}/${ENDPOINT_EXERCISES}`,\n        {\n            params: {\n                [exercisesParamFilter]: exercisesParamName,\n                keyword: keyword,\n                limit,\n            },\n        }\n    );\n    return response.data;\n}\n\nexport { renderExerciseByFilterName };\n// export { exerciseId };\n\n// ! will delete in future\n// export {exercisesParamFilter, exercisesParamName }\n\n\n"],"names":["BASE_URL","ENDPOINT_EXERCISES","refs","handleSearch","handleClickOnCardStart","renderExerciseByFilterName","show","showLoader","isiToast","hideLoader","results","totalPages","searchExerciseByFilters","markup","result","createCardsOfExercises","error","evt","inputKeyword","markupFilteredCards","hide","_id","rating","name","burnedCalories","time","bodyPart","target","exerciseId","keyword","limit","axios"],"mappings":"mNAQA,MAAMA,EAAW,sCACXC,EAAqB,YAG3BC,EAAK,WAAW,iBAAiB,SAAUC,CAAY,EAEvDD,EAAK,gBAAgB,iBAAiB,QAASE,CAAsB,EAoBrEC,EAA2B,qBAAsB,kBAAkB,EAGnE,eAAeA,GAA6B,CAWxC,GATAC,EAAKJ,EAAK,sBAAsB,EAChCI,EAAKJ,EAAK,UAAU,EACpBK,EAAWL,EAAK,WAAW,EAOvB,CAAC,sBAAwB,CAAC,mBAAoB,CAC9CM,EAAS,UAAS,EAClBF,EAAKJ,EAAK,UAAU,EACpBO,EAAWP,EAAK,WAAW,EAC3B,MACH,CAED,GAAI,CACA,KAAM,CAAE,QAAAQ,EAAS,WAAAC,CAAU,EAAK,MAAMC,EAAwB,SAAS,EAIvE,GAHA,QAAQ,IAAIF,CAAO,EACnB,QAAQ,IAAIC,CAAU,EAElB,CAACD,GAAWC,IAAe,EAAG,CAC9BH,EAAS,UAAS,EAClBF,EAAKJ,EAAK,UAAU,EACpBO,EAAWP,EAAK,WAAW,EAC3B,MACH,CAID,IAAIW,EAAS,GACb,UAAWC,KAAUJ,EACjBG,GAAUE,EAAuBD,CAAM,EAE3CZ,EAAK,gBAAgB,UAAYW,EAGjC,UAAU,MAAQ,EAEdF,EAAa,CAKpB,OAAQK,EAAO,CACZ,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CR,EAAS,iBAAgB,CACjC,QAAc,CACNC,EAAWP,EAAK,WAAW,CAG9B,CACL,CAKA,eAAeC,EAAac,EAAK,CAE7BA,EAAI,eAAc,EAClBf,EAAK,gBAAgB,UAAY,GACjC,UAAU,KAAO,EAEjB,MAAMgB,EAAeD,EAAI,cACzB,UAAU,QAAUC,EAAa,SAAS,SAAS,MAAM,OACzD,QAAQ,IAAI,UAAU,OAAO,EAE7B,GAAI,CACA,KAAM,CAAE,QAAAR,EAAS,WAAAC,CAAU,EAAK,MAAMC,EAAwB,SAAS,EAEvE,GAAI,CAAC,UAAU,QAAS,CACpBJ,EAAS,UAAS,EAClBF,EAAKJ,EAAK,UAAU,EACpBO,EAAWP,EAAK,WAAW,EAC3B,MACH,CAKD,IAAIiB,EAAsB,GAC1B,UAAWL,KAAUJ,EACjBS,GAAuBJ,EAAuBD,CAAM,EAExDZ,EAAK,gBAAgB,UAAYiB,CAEpC,OAAQH,EAAO,CACZ,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CR,EAAS,iBAAgB,CACjC,QAAc,CACNN,EAAK,WAAW,QAChBkB,EAAK,mBAAmB,CAC3B,CACL,CAIA,SAASL,EAAuB,CAAE,IAAAM,EAAK,OAAAC,EAAQ,KAAAC,EAAM,eAAAC,EAAgB,KAAAC,EAAM,SAAAC,EAAU,OAAAC,GAAU,CAC3F,MAAO;AAAA;AAAA;AAAA;AAAA;AAAA,2CAKgC,KAAK,MAAML,CAAM,CAAC;AAAA;AAAA;AAAA;AAAA,0CAInBD,CAAG;AAAA;AAAA;AAAA;AAAA,wCAILE,CAAI;AAAA;AAAA;AAAA;AAAA,kGAIsDC,CAAc,MAAMC,CAAI;AAAA;AAAA;AAAA,4FAG9BC,CAAQ;AAAA;AAAA;AAAA,yFAGXC,CAAM;AAAA;AAAA;AAAA;AAAA,GAK/F,CAKA,SAASvB,EAAuBa,EAAK,CACjCV,EAAWL,EAAK,WAAW,EAC3B,MAAM0B,EAAaX,EAAI,OAAO,QAAQ,GACtC,YAAYW,CAAU,CAC1B,CAIA,eAAehB,EAAwB,CAAE,QAAAiB,EAAS,MAAAC,GAAS,CAWvD,OAViB,MAAMC,EAAM,IACzB,GAAG/B,CAAQ,IAAIC,CAAkB,GACjC,CACI,OAAQ,CACJ,CAAC,oBAAoB,EAAG,mBACxB,QAAS4B,EACT,MAAAC,CACH,CACJ,CACT,GACoB,IACpB"}