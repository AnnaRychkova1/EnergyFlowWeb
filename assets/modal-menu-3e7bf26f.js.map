{"version":3,"file":"modal-menu-3e7bf26f.js","sources":["../../src/js/modal-menu.js"],"sourcesContent":["import { exerciseId } from './exercises-details';\nimport axios from 'axios';\nimport { hideLoader } from './services/visibility';\n\n// , getLoader\nconst gallery = document.querySelector('.results'); // плюс название содержимого карточки //\nconst backdrop = document.querySelector('.backdrop');\nconst modalCard = document.querySelector('.modal');\nconst favorites = document.querySelector('.ex-add-favorite');\nconst heartIcon = `\n// <svg class=\"icon-heart\" width=\"18\" height=\"18\">\n//     <use href=\"${symbol-defs}#icon-heart\"></use>\n// </svg>`;\n\n\nrenderCard();\nlet storage = 'favorites';\nlet storageItem = localStorage.getItem(storage);\nif (!storageItem) {\n    storageItem = [];\n} else {\n    storageItem = JSON.parse(storageItem);\n}\n\n// gallery.addEventListener('click', onClickCardContent);\n// async function onClickCardContent(event) {\n//     if (event.target === event.currentTarget) {\n//         return;\n//     }\n//     const element = event.target.closest('.favorites-start'); // название li элемента содержимого карточки //\n//     if (element === null) {\n//         return;\n//     }\n//     getLoader();\n//     const elementId = element.dataset.id;\n//     const exercisesInfo = await getCardInfo(elementId);\n\n//     backdrop.classList.remove('is-hidden');\n//   modalCard.innerHTML = '';\n//   hideLoader();\n// }\n  const addToFavoriteBtn = document.querySelector('.ex-add-favorite');\n  addToFavoriteBtn.addEventListener('click', addToFavoriteOnClick);\n\n  const closeBtn = document.querySelector('.modal-close-btn');\n  closeBtn.addEventListener('click', onCloseModal);\n  backdrop.addEventListener('click', handleBackdropClick);\n  document.addEventListener('keydown', handleEscapeKey);\n \nasync function addToFavoriteOnClick(event) {\n  const element = event.target.closest('.ex-add-favorite');\n  if (!element) return;\n\n  const elementId = element.dataset.id;\n  const favorites = JSON.parse(localStorage.getItem('favorites')) || [];\n\n  const isFavorite = favorites.some(item => item._id === elementId);\n\n  if (isFavorite) {\n    const updatedFavorites = favorites.filter(item => item._id !== elementId);\n    localStorage.setItem('favorites', JSON.stringify(updatedFavorites));\n    element.classList.remove('is-favorite');\n    element.innerHTML = changingButtonName('add');\n  } else {\n    const exercisesCardInfo = await getCardInfo(elementId);\n    localStorage.setItem('favorites', JSON.stringify([...favorites, exercisesCardInfo]));\n    element.classList.add('is-favorite');\n    element.innerHTML = changingButtonName('remove');\n  }\n}\nfunction onCloseModal() {\n  modalCard.classList.add('is-hidden');\n  backdrop.classList.add('is-hidden');\n  modalCard.innerHTML = '';\n\n  document.removeEventListener('keydown', handleEscapeKey);\n  backdrop.removeEventListener('click', handleBackdropClick);\n}\nfunction handleBackdropClick(event) {\n  if (event.target.closest('.modal')) {\n    return;\n  }\n  modalCard.classList.add('is-hidden');\n  backdrop.classList.add('is-hidden');\n  modalCard.innerHTML = '';\n\n  document.removeEventListener('keydown', handleEscapeKey);\n  backdrop.removeEventListener('click', handleBackdropClick);\n}\nfunction handleEscapeKey(event) {\n  event.preventDefault();\n  if (event.key === 'Escape') {\n    modalCard.classList.add('is-hidden');\n    backdrop.classList.add('is-hidden');\n    modalCard.innerHTML = '';\n\n    document.removeEventListener('keydown', handleEscapeKey);\n    backdrop.removeEventListener('click', handleBackdropClick);\n  }\n}\n\n// const exerciseId = '64f389465ae26083f39b17c0';\nasync function getCardInfo(exerciseId) {\n    try {\n        const BASE_URL = 'https://energyflow.b.goit.study/api';\n        const ENDPOINT = 'exercises';\n        const { data } = await axios.get(`${BASE_URL}/${ENDPOINT}/${exerciseId}`);\n        return data;\n    } catch (err) {\n        console.error(err);\n    }\n}\n\n\n\nfunction changingButtonName(value = 'add') {\n  if (value === 'add') {\n    return `Add to favorites\n        <svg class=\"icon-heart\" width=\"18\" height=\"18\">\n          <use href=\"${heartIcon}#icon-heart\"></use>\n        </svg>`;\n  } else {\n    return `Remove from\n        <svg class=\"icon-heart\" width=\"18\" height=\"18\">\n          <use href=\"${heartIcon}#icon-heart\"></use>\n        </svg>`;\n  }\n}\n\nasync function renderCard() {\n    try {\n        const results = await getCardInfo(exerciseId);\n        modalWindowMarkup(results);\n    } catch (error) {\n        console.error(error.message);\n    }\n}\n\nfunction modalWindowMarkup(results) {\n    const markup = results\n        .map(({\n            _id,\n            bodyPart,\n            equipment,\n            gifUrl,\n            name,\n            target,\n            description,\n            rating,\n            burnedCalories,\n            time,\n            popularity,\n        }) =>\n            `<div class=\"modal\">\n      <button class=\"modal-close-btn\">\n        <svg\n          class=\"modal-close-icon\"\n          width=\"24\"\n          height=\"24\"\n          aria-label=\"close icon\"\n        >\n          <use\n            class=\"ex-close-btn-icon-use\"\n            href=\"../img/icons/all icons/x.svg\"\n          ></use>\n        </svg>\n      </button>\n      <div class=\"exercise-gif\">\n        <img\n          src=\"${gifUrl}\"\n          class=\"gif-ex\"\n          width=\"295\"\n          height=\"258\"\n          alt=\"show exercise\"\n        />\n      </div>\n      <div class=\"ex-content-container\">\n        <h2 class=\"exercise-name\">${name}</h2>\n        <p class=\"ex-current-rating\">${rating}</p>\n        <ul class=\"exercise-stars-list\">\n          ${renderStars(rating)}\n        </ul>\n\n        <div class=\"exercise-information\">\n          <div class=\"ex-block\">\n            <span class=\"exercise-value\">Targer</span>\n            <span class=\"exercise-label ex-target\">${target}</span>\n          </div>\n          <div class=\"ex-block\">\n            <span class=\"exercise-value\">Body part</span>\n            <span class=\"exercise-label ex-body-part\">${bodyPart}</span>\n          </div>\n          <div class=\"ex-block\">\n            <span class=\"exercise-value\">Equipment</span>\n            <span class=\"exercise-label ex-equipment\">${equipment}</span>\n          </div>\n          <div class=\"ex-block\">\n            <span class=\"exercise-value\">Popular</span>\n            <span class=\"exercise-label ex-popular\">${popularity}</span>\n          </div>\n          <div class=\"ex-block\">\n            <span class=\"exercise-value\">Burned calories</span>\n            <span class=\"exercise-label ex-burned-calories\">${burnedCalories}/3 min</span>\n          </div>\n\n          <p class=\"exercise-description\">\n            ${description}\n          </p>\n\n          <div class=\"ex-add-btn\">\n            <button class=\"add-btn-icon\">\n              Add to favorites\n              <svg\n                class=\"heart-svg\"\n                width=\"18\"\n                height=\"18\"\n                aria-label=\"favorites icon\"\n              >\n                <use href=\"../img/icons/all icons/heart.svg\"></use>\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>`\n        )\n        .join('');\n    modalCard.innerHTML = markup;\n}\n\nfunction renderStars(rating) {\n    const filledStar = '<svg class=\"ex-rate-icon\" width=\"18\" height=\"18\" aria-label=\"rating icon\"><use href=\"../img/icons/all_icons/Star 1.svg\"></use></svg>';\n    const emptyStar = '<svg class=\"ex-rate-icon\" width=\"18\" height=\"18\" aria-label=\"rating icon\"><use href=\"../img/icons/all_icons/Star 2.svg\"></use></svg>';\n    const filledStars = filledStar.repeat(rating);\n    const emptyStars = emptyStar.repeat(5 - rating);\n    return filledStars + emptyStars;\n}\n\n\nexport { getCardInfo, renderCard }\n\n\n\n\n\n\n\n\n\n\n    \n    \n    \n    \n    \n// }\n// const startBtn = document.querySelector('.start-btn');\n// const modalEl = document.querySelector('.modal-backdrop');\n\n// startBtn.addEventListener('click', handleSearch);\n\n// function handleSearch(event) {\n//   event.preventDefault();\n//   fetchExercises().then(modalWindowMarkup).catch();\n// }\n\n// function fetchExercises() {\n//   return fetch(\n//     'https://energyflow.b.goit.study/api/exercises/64f389465ae26083f39b17a2'\n//   ).then(resp => {\n//     if (!resp.ok) {\n//       throw new Error(resp.statusText);\n//     }\n//     return resp.json();\n//   });\n// }\n\n// function modalWindowMarkup(filters = {}) {\n//   const {\n//     _id,\n//     bodyPart,\n//     equipment,\n//     time,\n//     target,\n//     burnedCalories,\n//     gifUrl,\n//     name,\n//     popularity,\n//     rating,\n//     description,\n//   } = filters;\n\n//   const markup = `<div class=\"exercises-modal-window\">\n//           <div class=\"exercise-container\">\n//             <button class=\"exercise-close-btn\" type=\"button\">\n//               <svg\n//                 class=\"exercise-close-icon\"\n//                 width=\"10\"\n//                 height=\"10\"\n//                 aria-label=\"Close icon\"\n//               >\n//                 <use href=\"../svg/icons.svg#icon-close-btn\"></use>\n//               </svg>\n//             </button>\n//             <div class=\"exercise-image-wrapper\">\n//               <img\n//                 src=\"${gifUrl}\"\n//                 alt=\"\"\n//                 class=\"exercise-image-modal\"\n//               />\n//             </div>\n//             <div class=\"exercise-info-wrapper\">\n//               <div class=\"exercise-name-container\">\n//                 <p class=\"exercise-name\">${name}</p>\n//                 <p class=\"exercise-rating\">${rating}</p>\n//               </div>\n//               <div class=\"exercise-params-container\">\n//                 <ul class=\"exercise-params-list\">\n//                   <li class=\"exercise-params-card\">\n//                     <p class=\"exercise-param-name\">Target</p>\n//                     <p class=\"exercise-param-value exercise-param-target\">${target}</p>\n//                   </li>\n//                   <li class=\"exercise-params-card\">\n//                     <p class=\"exercise-param-name\">Body part</p>\n//                     <p class=\"exercise-param-value exercise-param-bodypart\">${bodyPart}</p>\n//                   </li>\n//                   <li class=\"exercise-params-card\">\n//                     <p class=\"exercise-param-name\">Equipment</p>\n//                     <p class=\"exercise-param-value exercise-param-equipment\">${equipment}</p>\n//                   </li>\n//                   <li class=\"exercise-params-card\">\n//                     <p class=\"exercise-param-name\">Popular</p>\n//                     <p class=\"exercise-param-value exercise-param-popularuty\">${popularity}</p>\n//                   </li>\n//                   <li class=\"exercise-params-card\">\n//                   <p class=\"exercise-param-name\">Burned calories</p>\n//                   <p class=\"exercise-param-value exercise-param-popularuty\">${burnedCalories}/${time} m</p></li>\n//                 </ul>\n                \n//               </div>\n//               <p class=\"exercise-descr\">${description}</p>\n//               <div class=\"exercise-buttons\">\n//                 <button\n//                   class=\"exercise-favorite-btn\"\n//                   type=\"submit\"\n//                   data=\"${_id}\"\n//                 >\n//                   Add to favorites\n//                   <svg\n//                   class=\"exercise-fav-icon\"\n//                   aria-label=\"Heart icon\"\n//                   >\n//                   <use href=\"../svg/icons.svg#icon-heart\"></use>\n//                   </svg>\n//                 </button>\n//                 <button class=\"exercise-raiting-btn\" type=\"submit\" data=\"${_id}\">\n//                   Give a rating\n//                 </button>\n//               </div>\n//             </div>\n//           </div>\n//         </div>`;\n\n//   modalEl.innerHTML = markup;\n// }"],"names":["backdrop","modalCard","heartIcon","renderCard","storage","storageItem","addToFavoriteBtn","addToFavoriteOnClick","closeBtn","onCloseModal","handleBackdropClick","handleEscapeKey","event","element","elementId","favorites","item","updatedFavorites","changingButtonName","exercisesCardInfo","getCardInfo","exerciseId","BASE_URL","ENDPOINT","data","axios","err","value","results","modalWindowMarkup","error","markup","_id","bodyPart","equipment","gifUrl","name","target","description","rating","burnedCalories","time","popularity","renderStars","filledStar","emptyStar","filledStars","emptyStars"],"mappings":"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"}