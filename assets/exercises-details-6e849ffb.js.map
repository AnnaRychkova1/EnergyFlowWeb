{"version":3,"file":"exercises-details-6e849ffb.js","sources":["../../src/js/exercises-details.js"],"sourcesContent":["import axios from 'axios';\nimport { hide, show, showLoader, hideLoader } from './services/visibility';\nimport { refs } from './templates/refs.js';\nimport isiToast from './services/isiToast.js';\nimport { createModalMenu } from './modal-menu.js';\n\nconst BASE_URL = 'https://energyflow.b.goit.study/api';\nconst ENDPOINT_EXERCISES = 'exercises';\n\nrefs.resultContainer.addEventListener('click', handleClickOnCardStart)\n\nconst getParams = {\n    filter: name,\n    keyword: '',\n    page: 1,\n    limit: 9,\n}\n\nasync function renderExerciseByFilterName(exeptedFilter, name) {\n    let filter;\n\n    if (exeptedFilter === 'Body parts') {\n        filter = 'bodypart'\n    }\n    if (exeptedFilter === 'Muscles') {\n        filter = 'muscles'\n    }\n    if (exeptedFilter === 'Equipment') {\n        filter = 'equipment'\n    }\n\n    if (refs.exercisesGalleryEl) {\n        hide(refs.containerFilteredCards);\n    }\n    refs.exercisesSubtitle.textContent = `${name}`;\n    show(refs.containerFilteredCards);\n    show(refs.searchForm);\n    showLoader(refs.loaderModal);\n\n    // ! need to check for the first ul. is there or not\n\n    refs.resultContainer.innerHTML = '';\n\n    if (!filter || !name) {\n        isiToast.noResults();\n        show(refs.textResult);\n        hideLoader(refs.loaderModal);\n        return;\n    }\n\n    try {\n        const { results, totalPages } = await searchExerciseByFilters({\n            filter: filter,\n            name: name,\n            keyword: getParams.keyword,\n            limit: getParams.limit,\n            page: getParams.page\n        });\n        console.log(results);\n        console.log(totalPages);\n\n        if (!results || totalPages === 0) {\n            isiToast.noResults();\n            show(refs.textResult);\n            hideLoader(refs.loaderModal);\n            return;\n        }\n\n        // ! create markup for the first time or once\n\n        let markup = '';\n        for (const result of results) {\n            markup += createCardsOfExercises(result);\n        }\n        refs.resultContainer.innerHTML = markup;\n\n        // !  change number of pages\n        getParams.page += 1\n\n        if (totalPages > 1) {\n            // ! Pagination start\n            // createPagination();\n        }\n\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        isiToast.apiIsiToastError();\n    } finally {\n        hideLoader(refs.loaderModal);\n        // hide(paginationContainer);\n        // ! I have to removeListener from another person or not\n    }\n\n\n    // ! Works with search button\n    refs.searchForm.addEventListener('submit', handleSearch);\n\n    async function handleSearch(evt) {\n\n        evt.preventDefault();\n        refs.resultContainer.innerHTML = '';\n        getParams.page = 1;\n\n        const inputKeyword = evt.currentTarget;\n        getParams.keyword = inputKeyword.elements.query.value.trim();\n        console.log(getParams.keyword)\n\n        try {\n            const { results, totalPages } = await searchExerciseByFilters({\n                filter: filter,\n                name: name,\n                keyword: getParams.keyword,\n                limit: getParams.limit,\n                page: getParams.page\n            });\n// Correct\n            if (!getParams.keyword) {\n                isiToast.noQuery();\n                show(refs.textResult);\n                hideLoader(refs.loaderModal);\n                return\n            }\n\n            // ! check fot the wrong query \n           \n\n            // ! create markup for the first time or once\n\n            let markupFilteredCards = '';\n            for (const result of results) {\n                markupFilteredCards += createCardsOfExercises(result);\n            }\n            refs.resultContainer.innerHTML = markupFilteredCards;\n\n        } catch (error) {\n            console.error('Error fetching images:', error);\n            isiToast.apiIsiToastError();\n        } finally {\n            refs.searchForm.reset();\n            //hide(paginationContainer);\n        }\n    }\n}\n\n\n// ! Create markup\n\nfunction createCardsOfExercises({ _id, rating, name, burnedCalories, time, bodyPart, target }) {\n    return `<li class=\"filtered-card-item\">\n        <div class=\"card-box-workout\">\n          <div class=\"card-box-info\">\n            <div class=\"filtered-workout\">Workout</div>\n            <div class=\"card-box-rating\">\n              <p class=\"filtered-rating\">${Math.round(rating)}</p>\n              <img class=\"filteered-star\" href=\"#\" alt=\"star\" height=\"35\"></img>\n            </div>\n          </div>\n          <button type=\"submit\" data-id=${_id} class=\"to-favorites-start\">Start</button><a/>\n        </div>\n        <div class=\"card-box-title\">\n          <img class=\"filteered-athlete\" href=\"#\" alt=\"athlete\" height=\"35\"></img>\n          <h3 class=\"filteered-title\">${name}</h3>\n        </div>\n        <ul class=\"filtered-description\">\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Burned calories: <spam class=\"filtered-descr-value\">${burnedCalories} / ${time} min</spam></p>\n          </li>\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Body part: <spam class=\"filtered-descr-value\">${bodyPart}</spam></p>\n          </li>\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Target: <spam class=\"filtered-descr-value\">${target}</spam></p>\n          </li>\n        </ul>\n  </li>\n  `;\n}\n\n// ! Function for create modal  Створити делегування подій на лішку\n\nfunction handleClickOnCardStart(evt) {\n    if (!evt.target.dataset.id) {\n        return\n    }\n    // showLoader(refs.loaderModal);\n    const exerciseId = evt.target.dataset.id;\n    //console.log(exerciseId);\n    createModalMenu(exerciseId);\n}\n\n// ! Api Function\n\nasync function searchExerciseByFilters({filter, name, keyword, limit, page}) {\n    const response = await axios.get(\n        `${BASE_URL}/${ENDPOINT_EXERCISES}`,\n        {\n            params: {\n                [filter]: name,\n                keyword: keyword,\n                limit: limit,\n                page: page\n            },\n        }\n    );\n    return response.data;\n}\n\nexport { renderExerciseByFilterName };\n\n\n// ${renderStars(popularity)}"],"names":["BASE_URL","ENDPOINT_EXERCISES","refs","handleClickOnCardStart","getParams","renderExerciseByFilterName","exeptedFilter","name","filter","hide","show","showLoader","isiToast","hideLoader","results","totalPages","searchExerciseByFilters","markup","result","createCardsOfExercises","error","handleSearch","evt","inputKeyword","markupFilteredCards","_id","rating","burnedCalories","time","bodyPart","target","exerciseId","createModalMenu","keyword","limit","page","axios"],"mappings":"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"}