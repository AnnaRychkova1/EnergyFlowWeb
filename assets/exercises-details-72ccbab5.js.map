{"version":3,"file":"exercises-details-72ccbab5.js","sources":["../../src/js/services/pagination.js","../../src/js/exercises-details.js"],"sourcesContent":["import { refs } from '../templates/refs.js';\nimport { showLoader, hideLoader } from '../services/visibility.js';\nimport { scrollTo } from '../services/scrollTo.js';\n\nfunction pagesPagination(page, totalPages) {\n  let buttons = '';\n  const maxVisibleButtons = 3;\n\n  let startButton = Math.max(1, page - 1);\n  let endButton = Math.min(totalPages, startButton + maxVisibleButtons - 1);\n\n  if (startButton > 1) {\n    buttons += `<button class=\"button-pagination prev\" type=\"button\"><<</button>`;\n  }\n\n  for (let i = startButton; i <= endButton; i++) {\n    buttons += `<button class=\"button-pagination ${\n      i === page ? 'active' : ''\n    }\" type=\"button\">${i}</button>`;\n  }\n\n  if (endButton < totalPages) {\n    buttons += `<button class=\"button-pagination next\" type=\"button\">>></button>`;\n  }\n\n  return buttons;\n}\n\nfunction onPaginationClick(\n  createMarkup,\n  requestFunction,\n  params,\n  filledContainer,\n  identifier\n) {\n  let page = 1;\n  return async function onPagination(event) {\n    const button = event.target;\n    if (!button.parentElement.classList.contains(identifier)) {\n      return;\n    }\n\n    if (\n      button.classList.contains('prev') ||\n      button.classList.contains('next')\n    ) {\n      const currentPageButton = refs.paginationEl.querySelector(\n        '.button-pagination.active'\n      );\n      const currentPage = parseInt(currentPageButton.textContent, 10);\n      page = button.classList.contains('prev')\n        ? currentPage - 1\n        : currentPage + 1;\n    } else {\n      page = parseInt(event.target.textContent, 10);\n    }\n\n    params.page = page;\n\n    filledContainer.innerHTML = '';\n\n    try {\n      showLoader(refs.loaderModal);\n      const { results, totalPages } = await requestFunction(page, params);\n\n      if (results && results.length > 0) {\n        createMarkup(results);\n        refs.paginationEl.innerHTML = pagesPagination(page, totalPages);\n        scrollTo(refs.exercisesContainerEl);\n      } else {\n        console.error('No results found for this filter');\n      }\n    } catch (error) {\n      console.log(error);\n    } finally {\n      hideLoader(refs.loaderModal);\n    }\n  };\n}\n\nexport { pagesPagination, onPaginationClick };\n","import axios from 'axios';\nimport { hide, show, hideLoader, showLoader } from './services/visibility';\nimport { refs } from './templates/refs.js';\nimport { scrollTo } from './services/scrollTo.js';\nimport { onPaginationClick, pagesPagination } from './services/pagination';\nimport { renderModalMenu } from './modal-menu.js';\nimport icons from '/img/icons/symbol-defs.svg';\n\nconst BASE_URL = 'https://energyflow.b.goit.study/api';\nconst ENDPOINT_EXERCISES = 'exercises';\n\nconst screenWidth = window.innerWidth;\n\nlet page = 1;\nlet filter = '';\nlet currentLimit;\nlet getParams = {\n  keyword: '',\n  page: page,\n  limit: currentLimit,\n};\n\nif (screenWidth < 1440) {\n  currentLimit = 8;\n} else {\n  currentLimit = 9;\n}\n\nrefs.subexercisesSearchForm.addEventListener('submit', handleSearch);\n\nrefs.paginationEl.addEventListener(\n  'click',\n  onPaginationClick(\n    renderCards,\n    searchExerciseByFilters,\n    getParams,\n    refs.subexercisesFilteredCards,\n    'second-pagination'\n  )\n);\n\nasync function renderExerciseByFilterName(expectedFilter, expectedName) {\n  hideLoader(refs.loaderModal);\n\n  if (!expectedFilter || !expectedName) {\n    show(refs.subexercisesTextNoFound);\n    return;\n  }\n\n  getParams = {\n    keyword: '',\n    page: page,\n    limit: currentLimit,\n  };\n\n  if (expectedFilter === 'Body parts') {\n    filter = 'bodypart';\n  } else if (expectedFilter === 'Muscles') {\n    filter = 'muscles';\n  } else if (expectedFilter === 'Equipment') {\n    filter = 'equipment';\n  }\n\n  getParams[filter] = expectedName;\n\n  hide(refs.subexercisesTextNoFound);\n  show(refs.subexercisesSearchForm);\n  show(refs.subexercisesFilteredCards);\n  show(refs.exercisesSubtitle);\n  refs.exercisesSubtitle.textContent = `${name}`;\n  refs.subexercisesFilteredCards.innerHTML = '';\n  refs.paginationEl.innerHTML = '';\n  refs.exercisesGalleryEl.innerHTML = '';\n  refs.paginationEl.classList.add('second-pagination');\n  refs.paginationEl.classList.remove('first-pagination');\n\n  try {\n    showLoader(refs.loaderModal);\n    const { results, totalPages } = await searchExerciseByFilters(page);\n\n    if (totalPages > 1) {\n      refs.paginationEl.innerHTML = pagesPagination(page, totalPages);\n    }\n\n    if (results && results.length > 0) {\n      renderCards(results);\n      hideLoader(refs.loaderModal);\n    } else {\n      show(refs.subexercisesTextNoFound);\n      hideLoader(refs.loaderModal);\n      return;\n    }\n\n    scrollTo(refs.exercisesContainerEl);\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    hideLoader(refs.loaderModal);\n  } finally {\n    hideLoader(refs.loaderModal);\n  }\n}\n\nasync function handleSearch(evt) {\n  evt.preventDefault();\n\n  const formData = evt.currentTarget;\n  getParams.keyword = formData.query.value.trim();\n\n  console.log(getParams.keyword);\n  console.log(filter);\n  console.log(getParams[filter]);\n\n  if (!getParams.keyword) {\n    console.log('input keyword');\n  }\n\n  show(refs.subexercisesSearchForm);\n  hide(refs.subexercisesTextNoFound);\n  refs.subexercisesFilteredCards.innerHTML = '';\n  refs.paginationEl.innerHTML = '';\n  refs.exercisesGalleryEl.innerHTML = '';\n\n  try {\n    showLoader(refs.loaderModal);\n    const { results, totalPages } = await searchExerciseByFilters(page);\n\n    if (totalPages > 1) {\n      refs.paginationEl.innerHTML = pagesPagination(page, totalPages);\n    }\n\n    if (results && results.length > 0) {\n      renderCards(results);\n      hideLoader(refs.loaderModal);\n    } else {\n      show(refs.subexercisesTextNoFound);\n      hideLoader(refs.loaderModal);\n      return;\n    }\n    scrollTo(refs.exercisesContainerEl);\n  } catch (error) {\n    console.error('Error fetching request:', error);\n    hideLoader(refs.loaderModal);\n  } finally {\n    refs.subexercisesSearchForm.reset();\n  }\n}\n\nrefs.subexercisesFilteredCards.addEventListener(\n  'click',\n  handleClickOnCardStart\n);\n\n// request to modal window\nfunction handleClickOnCardStart(evt) {\n  if (!evt.target.dataset.id) {\n    return;\n  }\n  const exerciseId = evt.target.dataset.id;\n  // showLoader(refs.loaderModal);\n  renderModalMenu(exerciseId);\n}\n\n// request to server\nasync function searchExerciseByFilters(page) {\n  const response = await axios.get(`${BASE_URL}/${ENDPOINT_EXERCISES}`, {\n    params: { ...getParams, page },\n  });\n  return response.data;\n}\n\n// renderCards\nfunction renderCards(results) {\n  refs.exercisesGalleryEl.innerHTML = '';\n  const markup = results.map(result => createCard(result)).join('');\n  refs.subexercisesFilteredCards.innerHTML = markup;\n}\n\n// create Card\nfunction createCard({\n  _id,\n  rating,\n  name,\n  burnedCalories,\n  time,\n  bodyPart,\n  target,\n}) {\n  return `<li class=\"filtered-card-item\">\n        <div class=\"card-box-workout\">\n\n          <div class=\"card-box-info\">\n            <div class=\"filtered-workout\">Workout</div>\n            <div class=\"card-box-rating\">\n              <p class=\"filtered-rating\">${rating.toFixed(1)}</p>\n              <svg class=\"filtered-star\" width=\"16\" height=\"16\">\n                <use href=\"${icons}#icon-Star-1\"></use>\n              </svg>\n            </div>\n          </div>\n\n          <button class=\"to-favorites-start\" type=\"click\" data-id=${_id}>\n            <span data-id=${_id}>Start</span>\n            <svg data-id=${_id} class=\"filtered-start\" width=\"16\" height=\"16\">\n              <use href=\"${icons}#icon-arrow-right\"></use>\n            </svg>\n          </button>\n\n        </div>\n\n        <div class=\"card-box-title\">\n          <div class=\"filtered-athlete-box\">\n            <svg class=\"filtered-athlete\" width=\"16\" height=\"16\">\n              <use href=\"${icons}#icon-Man\"></use>\n            </svg>\n          </div>\n          <h3 class=\"filtered-title\">${name}</h3>\n        </div>\n\n        <ul class=\"filtered-description\">\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Burned calories: <span class=\"filtered-descr-value\">${burnedCalories} / ${time} min</span></p>\n          </li>\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Body part: <span class=\"filtered-descr-value\">${\n              bodyPart.charAt(0).toUpperCase() + bodyPart.slice(1)\n            }</span></p>\n          </li>\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Target: <span class=\"filtered-descr-value\">${\n              target.charAt(0).toUpperCase() + target.slice(1)\n            }</span></p>\n          </li>\n        </ul>\n  </li>`;\n}\n\nexport { renderExerciseByFilterName };\n"],"names":["pagesPagination","page","totalPages","buttons","startButton","endButton","i","onPaginationClick","createMarkup","requestFunction","params","filledContainer","identifier","event","button","currentPageButton","refs","currentPage","showLoader","results","scrollTo","error","hideLoader","BASE_URL","ENDPOINT_EXERCISES","screenWidth","filter","currentLimit","getParams","handleSearch","renderCards","searchExerciseByFilters","renderExerciseByFilterName","expectedFilter","expectedName","show","hide","evt","formData","handleClickOnCardStart","exerciseId","renderModalMenu","axios","markup","result","createCard","_id","rating","name","burnedCalories","time","bodyPart","target","icons"],"mappings":"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"}