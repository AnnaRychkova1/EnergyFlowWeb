{"version":3,"file":"exercises-details-79ee07ad.js","sources":["../../src/js/exercises-details.js"],"sourcesContent":["// ! imports\n//import Pagination from 'tui-pagination'; \n// import 'tui-pagination/dist/tui-pagination.min.css';\nimport axios from 'axios';\nconst BASE_URL = 'https://energyflow.b.goit.study/api';\nconst ENDPOINT_EXERCISES = 'exercises';\nimport { hide, show, showLoader, hideLoader } from \"./services/visibility\";\nimport { refs } from './templates/refs.js';\nimport isiToast from './services/isiToast.js';\n// import { exercisesParamFilter, exercisesParamName } from '../exercises'; - wait for push\n// import { getCardInfo } from './modal-menu.js';\n\n// ! add listeners\nrefs.searchForm.addEventListener('submit', handleSearch); // спочатку відкрити, потім закрити, по днфолту в нього має бути клас хіден\n// refs.containerFilteredCards // mine div for all exept form - спочатку відкрити, потім закрити, по днфолту в нього має бути клас хіден\nrefs.resultContainer.addEventListener('click', handleClickOnCardStart)\n\n\n// // ! temporarely consts\n// const exercisesParamFilter = \"bodypart\";\n// // const exercisesParamFilter = \"muscles\";\n// // const exercisesParamFilter = \"equipment\";\n// const exercisesParamName = 'waist';\n// // const exercisesParamName = 'barbell';\n\nconst queryParams = {\n  filter: exercisesParamName,\n  keyword: '',\n  page: 1,\n  limit: 9,\n  totalItems: 0,\n};\n\nlet exerciseId;\n\n// Я взяла з мейнApi\n\nconst ENDPOINT_FILTER = 'exercises';\n\nasync function searchExerciseByFilters({ keyword}) {\n  const response = await axios.get(\n    `${BASE_URL}/${ENDPOINT_EXERCISES}`,\n    {\n      params: {\n        [exercisesParamFilter]: exercisesParamName,\n        keyword: keyword, \n      },\n    }\n  );\n  return response.data;\n}\n\n// Це кінець того, що я взяла\n\n// ! work with title\n// refs.exercisesHeader.textContent = `/${exercisesParamName}`;\n\n// ! Василина викликає мою функцію renderExerciseByFilterName();\nrenderExerciseByFilterName();\nasync function renderExerciseByFilterName() {\n\n  // here need to create mine container\n\n  // ! need or not\n  // refs.resultContainer.innerHTML = ''; \n\n  show(refs.searchForm)\n  showLoader(refs.loaderModal);\n\n  if (!exercisesParamFilter || !exercisesParamName ) {\n    isiToast.noResults();\n    show(refs.textResult);\n    hideLoader(refs.loaderModal);\n    return\n  }\n\n  try {\n    const { results, totalPages } = await searchExerciseByFilters(queryParams);\n    console.log(results);\n    console.log(totalPages);\n\n    // there is almost the same as if (!exercisesParamFilter || !exercisesParamName )\n    if (!results || totalPages === 0) {\n      isiToast.noResults();\n      show(refs.textResult);\n      hideLoader(refs.loaderModal);\n      return\n    }\n\n    //! має появитися частинка заголовка, але не я, а Василина\n\n    // ! create markup for the first time or once\n\n    let markup = '';\n    for (const result of results) {\n      markup += createCardsOfExercises(result);\n    }\n    refs.resultContainer.innerHTML = markup;\n    \n    if (totalPages > 1) {\n      const total = queryParams.limit * totalPages;\n      queryParams.page += 1\n      console.log(total);\n\n      // ! Pagination start\n      //createPagination(total);\n    } else {\n      isiToast.endOfSearchIsiToast();\n    }\n  \n  } catch (error) {\n    console.error('Error fetching images:', error);\n    isiToast.apiIsiToastError();\n  } finally {\n    hideLoader(refs.loaderModal);\n    hide(paginationContainer);\n    // ! I have to removeListener from another person\n  }\n}\n\n// ! Works with search button\nasync function handleSearch(event) {\n  event.preventDefault();\n  refs.resultContainer.innerHTML = '';\n\n// //   try {\n// //     const { results, totalPages } = await searchExerciseByFilters(queryParams);\n\n  if (!queryParams.keyword) {\n    isiToast.noResults();\n    show(refs.textResult);\n    hideLoader(refs.loaderModal);\n    return\n  }\n\n  try {\n    console.log(queryParams);\n    const { results } = await searchExerciseByFilters(queryParams);\n    \n// //     if (page !== totalPages) {\n\n    // ! create markup for the first time or once\n\n    let markupFilteredCards = '';\n    for (const result of results) {\n      markupFilteredCards += createCardsOfExercises(result);\n    }\n    refs.resultContainer.innerHTML = markupFilteredCards;\n      \n  } catch (error) {\n    console.error('Error fetching images:', error);\n    isiToast.apiIsiToastError();\n  } finally {\n    refs.searchForm.reset();\n    hide(paginationContainer);\n  }\n}\n\n// ! Create markup\n\nfunction createCardsOfExercises({ _id, rating, name, burnedCalories, time, bodyPart, target }) {\n  return `<li class=\"filtered-card-item\">\n        <div class=\"card-box-workout\">\n          <div class=\"card-box-info\">\n            <div class=\"filtered-workout\">Workout</div>\n            <div class=\"card-box-rating\">\n              <p class=\"filtered-rating\">${Math.round(rating)}</p>\n              <img class=\"filteered-star\" href=\"#\" alt=\"star\" height=\"35\"></img>\n            </div>\n          </div>\n          <button type=\"submit\" data-id=${_id} class=\"to-favorites-start\">Start</button><a/>\n        </div>\n        <div class=\"card-box-title\">\n          <img class=\"filteered-athlete\" href=\"#\" alt=\"athlete\" height=\"35\"></img>\n          <h3 class=\"filteered-title\">${name}</h3>\n        </div>\n        <ul class=\"filtered-description\">\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Burned calories: <spam class=\"filtered-descr-value\">${burnedCalories} / ${time} min</spam></p>\n          </li>\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Body part: <spam class=\"filtered-descr-value\">${bodyPart}</spam></p>\n          </li>\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Target: <spam class=\"filtered-descr-value\">${target}</spam></p>\n          </li>\n        </ul>  \n  </li>\n  `;\n}\n\n// function createCardsOfExercises(results, resultContainer) {\n//   const markup = results\n//     .map(\n//       ({ _id, rating, name, burnedCalories, time, bodyPart, target }) => `<li class=\"filtered-card-item\">\n//         <div class=\"card-box-workout\">\n//           <div class=\"card-box-info\">\n//             <div class=\"filtered-workout\">Workout</div>\n//             <div class=\"card-box-rating\">\n//               <p class=\"filtered-rating\">${Math.round(rating)}</p>\n//               <img class=\"filteered-star\" href=\"#\" alt=\"star\" height=\"35\"></img>\n//             </div>\n//           </div>\n//           <button type=\"submit\" data-id=${_id} class=\"to-favorites-start\">Start</button><a/>\n//         </div>\n//         <div class=\"card-box-title\">\n//           <img class=\"filteered-athlete\" href=\"#\" alt=\"athlete\" height=\"35\"></img>\n//           <h3 class=\"filteered-title\">${name}</h3>\n//         </div>\n//         <ul class=\"filtered-description\">\n//           <li class=\"filtered-descr-item\">\n//             <p class=\"filtered-descr-title\">Burned calories: <spam class=\"filtered-descr-value\">${burnedCalories} / ${time} min</spam></p>\n//           </li>\n//           <li class=\"filtered-descr-item\">\n//             <p class=\"filtered-descr-title\">Body part: <spam class=\"filtered-descr-value\">${bodyPart}</spam></p>\n//           </li>\n//           <li class=\"filtered-descr-item\">\n//             <p class=\"filtered-descr-title\">Target: <spam class=\"filtered-descr-value\">${target}</spam></p>\n//           </li>\n//         </ul>  \n//   </li>\n//   `\n//     )\n//     .join('');\n\n//   resultContainer.insertAdjacentHTML('beforeend', markup);\n  \n// }\n\n\n//! Pagination\n//const paginationContainer = document.getElementById('pagination-container');\n//function createPagination(totalPages, total) {\n    \n    \n    // Перевірка на те, чи потрібно створювати пагінацію\n    if (totalPages > 1) {\n        // Створюємо новий екземпляр пагінації\n        const pagination = new Pagination(paginationContainer, {\n            totalItems: total, // Загальна кількість елементів, які будуть розділені по сторінках\n            itemsPerPage: 1, // Кількість елементів на одній сторінці\n            visiblePages: 3, // Кількість видимих сторінок в пагінації\n            page: 1, // Початкова сторінка\n            centerAlign: true, // Вирівнювання пагінації по центру\n            template: {\n                // Налаштування шаблону кнопок пагінації\n                page: '<a class=\"tui-pagination-btn\">{{page}}</a>',\n                currentPage: '<strong class=\"tui-pagination-btn tui-pagination-active\">{{page}}</strong>',\n                moveButton: '<a class=\"tui-pagination-btn tui-pagination-control\"></a>',\n                disabledMoveButton: '<a class=\"tui-pagination-btn tui-pagination-control disabled\"></a>',\n                moreButton: '<a class=\"tui-pagination-btn tui-pagination-ellipsis\" aria-label=\"More\"></a>'\n            }\n        });\n    } else {\n        // Якщо сторінка одна, пагінація не потрібна\n      paginationContainer.innerHTML = ''; // Очищуємо контейнер\n    }\n//}\n\n// async function handlePagination(event) {\n//     if (event.target.tagName === 'A' && event.target.classList.contains('tui-pagination-btn')) {\n//         const pageNum = parseInt(event.target.textContent);\n//         console.log(pageNum);\n        \n//         queryParams.page = pageNum;\n\n//         try {\n//             const { results, totalPages } = await searchExerciseByFilters(queryParams);\n\n//             if (!results || totalPages === 0) {\n//                 isiToast.noResults();\n//                 show(refs.textResult);\n//                 hideLoader(refs.loaderModal);\n//                 return;\n//             }\n\n//             //refs.resultContainer.innerHTML = '';\n//             createCardsOfExercises(results, refs.resultContainer);\n//         } catch (error) {\n//             console.error('Error fetching images:', error);\n//             isiToast.apiIsiToastError();\n//         } finally {\n//             hideLoader(refs.loaderModal);\n//         }\n//     }\n// }\n\n\n\n\n\n    // ! Function for create modal  Створити делегування подій на лішку\n    \nfunction handleClickOnCardStart(evt) {\n      \n  console.log(evt);\n  console.log(evt.target.closest('ul').dataset.id);\n  \n//       exerciseId = evt.currentTarget.dataset.id;\n//       console.log(exerciseId);\n//   evt.preventDefault();\n// console.log('hi');\n//   console.log(evt.tarlet.dataset.id);\n  \n  // console.log(evt.target.closest('ul').dataset.exercises);\n  //     if (evt.target.closest('ul').dataset.exercises) {\n  //       getCardInfo();\n  //   }\n    \n} \n\n\n\nexport { renderExerciseByFilterName };\nexport { exerciseId };\n  \n// ! will delete in future\n// export {exercisesParamFilter, exercisesParamName }\n"],"names":["BASE_URL","ENDPOINT_EXERCISES","refs","handleSearch","handleClickOnCardStart","queryParams","exerciseId","searchExerciseByFilters","keyword","axios","renderExerciseByFilterName","show","showLoader","isiToast","hideLoader","results","totalPages","markup","result","createCardsOfExercises","total","error","hide","event","markupFilteredCards","_id","rating","name","burnedCalories","time","bodyPart","target","evt"],"mappings":"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"}