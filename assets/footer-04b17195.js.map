{"version":3,"file":"footer-04b17195.js","sources":["../../src/js/footer.js"],"sourcesContent":["import axios from 'axios';\nimport { refs } from '/js/templates/refs.js';\nimport { hideLoader, showLoader } from '/js/services/visibility.js';\nimport { errorResult, successResult } from '/js/services/iziToast.js';\n\nconst form = document.querySelector('.footer-form');\n\nif (form) {\n  form.addEventListener('submit', function (event) {\n    event.preventDefault();\n\n    const emailInput = document\n      .querySelector('.footer-input')\n      .value.trim()\n      .toLowerCase();\n\n    if (emailInput) {\n      showLoader(refs.loaderModal);\n      sendSubscriptionRequest(emailInput);\n      hideLoader(refs.loaderModal);\n    } else {\n      errorResult(\n        'Invalid email entered. Please check the format and try again.'\n      );\n    }\n  });\n}\n\nasync function sendSubscriptionRequest(email) {\n  const request = await axios\n    .post('https://energyflow.b.goit.study/api/subscription', {\n      email: email,\n    })\n    .then(function (response) {\n      successResult('Your subscription is succesfully');\n      form.reset();\n    })\n    .catch(function (error) {\n      if (error.response.status === 409) {\n        errorResult('Subscription already exists.');\n      } else {\n        errorResult(\n          'An error occured while sending the request. Please try again.'\n        );\n      }\n    })\n    .finally(function () {\n      form.reset();\n    });\n}\n"],"names":["form","event","emailInput","showLoader","refs","sendSubscriptionRequest","hideLoader","errorResult","email","axios","response","successResult","error"],"mappings":"iOAKA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAE9CA,GACFA,EAAK,iBAAiB,SAAU,SAAUC,EAAO,CAC/CA,EAAM,eAAc,EAEpB,MAAMC,EAAa,SAChB,cAAc,eAAe,EAC7B,MAAM,KAAM,EACZ,cAECA,GACFC,EAAWC,EAAK,WAAW,EAC3BC,EAAwBH,CAAU,EAClCI,EAAWF,EAAK,WAAW,GAE3BG,EACE,+DACR,CAEA,CAAG,EAGH,eAAeF,EAAwBG,EAAO,CAC5B,MAAMC,EACnB,KAAK,mDAAoD,CACxD,MAAOD,CACb,CAAK,EACA,KAAK,SAAUE,EAAU,CACxBC,EAAc,kCAAkC,EAChDX,EAAK,MAAK,CAChB,CAAK,EACA,MAAM,SAAUY,EAAO,CAClBA,EAAM,SAAS,SAAW,IAC5BL,EAAY,8BAA8B,EAE1CA,EACE,+DACV,CAEA,CAAK,EACA,QAAQ,UAAY,CACnBP,EAAK,MAAK,CAChB,CAAK,CACL"}