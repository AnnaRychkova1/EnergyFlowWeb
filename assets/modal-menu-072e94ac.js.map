{"version":3,"file":"modal-menu-072e94ac.js","sources":["../../src/img/icons/symbol-defs.svg","../../src/js/modal-menu.js"],"sourcesContent":["export default \"__VITE_ASSET__bf1dda18__\"","import axios from 'axios';\nimport { hide, show, showLoader, hideLoader } from './services/visibility';\nimport icons from '../img/icons/symbol-defs.svg';\n\nconst gallery = document.querySelector('.results'); // плюс название содержимого карточки //\nconst backdrop = document.querySelector('.backdrop');\nconst modalCard = document.querySelector('.modal');\n\nconst heartIcon = `\n// <svg class=\"icon-heart\" width=\"18\" height=\"18\">\n//     <use href=\"${icons}#icon-heart\"></use>\n// </svg>`;\n\nlet expectedId;\nasync function createModalMenu(expectedExercisesId) {\n  show(backdrop);\n  expectedId = expectedExercisesId;\n\n  try {\n    const responseIdObject = await getCardInfo(expectedId);\n    console.log(responseIdObject);\n    modalWindowMarkup(responseIdObject);\n\n    console.log(expectedId);\n    const addToFavoriteBtn = document.querySelector('.ex-add-favorite');\n    addToFavoriteBtn.addEventListener('click', addToFavoriteOnClick);\n    function addToFavoriteOnClick(event) {\n      const exerciseId = event.target.dataset.id || expectedId;\n      const exerciseName = document.querySelector('.exercise-name').textContent;\n      const exerciseBodyPart = document.querySelector(\n        '.exercise-information .ex-block:nth-child(1) .exercise-label'\n      ).textContent;\n      const exerciseEquipment = document.querySelector(\n        '.exercise-information .ex-block:nth-child(2) .exercise-label'\n      ).textContent;\n      const exerciseTime = document.querySelector(\n        '.exercise-information .ex-block:nth-child(3) .exercise-label'\n      ).textContent;\n      const exerciseTarget = document.querySelector(\n        '.exercise-information .ex-block:nth-child(4) .exercise-label'\n      ).textContent;\n      const exerciseBurnedCalories = document.querySelector(\n        '.exercise-information .ex-block:nth-child(5) .exercise-label'\n      ).textContent;\n      const exerciseGifUrl = document.querySelector('.exercise-gif img').src;\n      let favorites =\n        JSON.parse(localStorage.getItem('exerciseFavorites')) || [];\n      const isFavorite = favorites.some(\n        favorite => favorite._id === exerciseId\n      );\n      if (isFavorite) {\n        event.target.textContent = 'Add to favorites';\n      } else {\n        event.target.textContent = 'Remove from favorites';\n      }\n      if (isFavorite) {\n        favorites = favorites.filter(favorite => favorite._id !== exerciseId);\n        localStorage.setItem('exerciseFavorites', JSON.stringify(favorites));\n      } else {\n        const newExercise = {\n          _id: exerciseId,\n          name: exerciseName,\n          bodyPart: exerciseBodyPart,\n          equipment: exerciseEquipment,\n          time: exerciseTime,\n          target: exerciseTarget,\n          burnedCalories: exerciseBurnedCalories,\n          gifUrl: exerciseGifUrl,\n        };\n        favorites.push(newExercise);\n        localStorage.setItem('exerciseFavorites', JSON.stringify(favorites));\n      }\n    }\n\n    const closeButton = document.querySelector('.modal-close-btn');\n    closeButton.addEventListener('click', closeModal);\n    document.addEventListener('keydown', escapeClickHandler);\n    backdrop.addEventListener('click', backdropClickHandler);\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  }\n}\n\nasync function getCardInfo(exerciseId) {\n  console.log(exerciseId);\n  try {\n    const BASE_URL = 'https://energyflow.b.goit.study/api';\n    const ENDPOINT = 'exercises';\n    const { data } = await axios.get(`${BASE_URL}/${ENDPOINT}/${exerciseId}`);\n    return data;\n  } catch (err) {\n    console.error(err);\n  }\n}\n\nfunction modalWindowMarkup({\n  _id,\n  bodyPart,\n  equipment,\n  time,\n  target,\n  burnedCalories,\n  gifUrl,\n  name,\n  popularity,\n  rating,\n  description,\n}) {\n  const markup = `<div class=\"modal-container\">\n            <button class=\"modal-close-btn\">\n                <svg\n                    class=\"modal-close-icon\"\n                    width=\"24\"\n                    height=\"24\">\n                    <use href=\"${icons}#icon-x\"></use>\n                </svg>\n            </button>\n            <div class=\"exercise-gif\">\n              <picture>\n                <source\n                  media=\"(max-width:767.98px)\"\n                  type=\"gif\"\n                  width=\"295\"\n                  height=\"258\"\n                  />\n                <source\n                  media=\"(min-width:768px)\"\n                  type=\"gif\"\n                  width=\"270\"\n                  height=\"259\"\n                  />\n                  <img\n                    class=\"gif-ex\"\n                    src=\"${gifUrl}\"\n                    width=\"295\"\n                    height=\"258\"\n                    alt=\"${name}\"\n                  />\n              </picture>\n            </div>\n            <div class=\"ex-content-container\">\n                <h3 class=\"exercise-name\">${name}</h3>\n               <div class=\"rating-container\">\n                <p class=\"ex-current-rating\">${rating}</p>\n                <ul class=\"exercise-stars-list\">\n                     \n                </ul>\n                </div>\n                <div class=\"exercise-information\">\n                    <div class=\"ex-block\">\n                        <span class=\"exercise-value\">Target</span>\n                        <span class=\"exercise-label\">${target}</span>\n                    </div>\n                    <div class=\"ex-block\">\n                        <span class=\"exercise-value\">Body part</span>\n                        <span class=\"exercise-label\">${bodyPart}</span>\n                    </div>\n                    <div class=\"ex-block\">\n                        <span class=\"exercise-value\">Equipment</span>\n                        <span class=\"exercise-label\">${equipment}</span>\n                    </div>\n                    <div class=\"ex-block\">\n                        <span class=\"exercise-value\">Popular</span>\n                        <span class=\"exercise-label\">${popularity}</span>\n                    </div>\n                    <div class=\"ex-block\">\n                        <span class=\"exercise-value\">Burned calories</span>\n                        <span class=\"exercise-label\">${burnedCalories}/3 min</span>\n                    </div>\n\n                    <p class=\"exercise-description\">\n                        ${description}\n                    </p>\n\n                    <div class=\"ex-add-btn-container\">\n                        <button type=\"button\" data-id=\"${_id}\" class=\"ex-add-favorite\">\n                            Add to favorites\n                            <svg\n                                class=\"heart-svg\"\n                                width=\"18\"\n                                height=\"18\">\n                                <use href=\"${icons}#icon-heart\"></use>\n                            </svg>\n                        </button>\n                         <button data-id=\"${_id}\" class=\"ex-rating-button\">\n                           Give a rating\n                         </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `;\n\n  modalCard.innerHTML = markup;\n}\n\nfunction closeModal() {\n  hide(backdrop);\n  document.removeEventListener('click', closeModal);\n  document.removeEventListener('keydown', escapeClickHandler);\n  if (document.contains(backdrop)) {\n    backdrop.removeEventListener('click', backdropClickHandler);\n  }\n}\nfunction backdropClickHandler(event) {\n  if (event.target === backdrop) {\n    closeModal();\n  }\n}\nfunction escapeClickHandler(event) {\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n}\n\nconst stars = document.querySelectorAll('.ex-rate-icon');\nconst activeColor = '#eea10c';\nconst noActiveColor = '#e8e8e8';\n\n// stars.forEach((star, index) => {\n//   const rating = Number(star.getAttribute('data-rating'));\n//   const starHTML = renderStars(rating);\n//   const filledStarsCount = (starHTML.match(/&#9733;/g) || []).length;\n//   if (index < filledStarsCount) {\n//     star.style.fill = activeColor;\n//   } else {\n//     star.style.fill = noActiveColor;\n//   }\n// });\n\n// function renderStars(rating) {\n//   const filledStar = '<span class=\"star\">&#9733;</span>';\n//   const emptyStar = '<span class=\"star\">&#9734;</span>';\n//   const filledStars = filledStar.repeat(Math.floor(rating));\n//   const halfStar = rating % 1 !== 0 ? '<span class=\"star\">&#9733;</span>' : '';\n//   const emptyStarsCount = Math.max(0, 5 - Math.ceil(rating)); // Ensure non-negative value\n//   const emptyStars = emptyStar.repeat(emptyStarsCount);\n//   return filledStars + halfStar + emptyStars;\n// }\n\nexport { createModalMenu };\n"],"names":["icons","backdrop","modalCard","expectedId","createModalMenu","expectedExercisesId","show","addToFavoriteOnClick","event","exerciseId","exerciseName","exerciseBodyPart","exerciseEquipment","exerciseTime","exerciseTarget","exerciseBurnedCalories","exerciseGifUrl","favorites","isFavorite","favorite","newExercise","responseIdObject","getCardInfo","modalWindowMarkup","closeModal","escapeClickHandler","backdropClickHandler","error","BASE_URL","ENDPOINT","data","axios","err","_id","bodyPart","equipment","time","target","burnedCalories","gifUrl","name","popularity","rating","description","markup","hide"],"mappings":"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"}