{"version":3,"file":"exercises-details-46474c8f.js","sources":["../../src/js/exercises-details.js"],"sourcesContent":["import axios from 'axios';\nimport { hide, show, showLoader, hideLoader } from './services/visibility';\nimport { refs } from './templates/refs.js';\nimport { scrollTo } from './services/scrollTo.js';\nimport { createModalMenu } from './modal-menu.js';\nimport icons from '/img/icons/symbol-defs.svg';\n\nconst BASE_URL = 'https://energyflow.b.goit.study/api';\nconst ENDPOINT_EXERCISES = 'exercises';\n\nconst screenWidth = window.innerWidth;\n\nconst getParams = {\n  filter: '',\n  keyword: '',\n  page: 1,\n  limit: 9,\n};\n\n// today\nconsole.log(new Date());\n\nasync function renderExerciseByFilterName(expectedFilter, name) {\n  if (refs.exercisesGalleryEl) {\n    hide(refs.subexercisesFilteredCards);\n    hide(refs.subexercisesSearchForm);\n  }\n\n  if (screenWidth < 1440) {\n    getParams.limit = 8;\n  } else {\n    getParams.limit = 9;\n  }\n\n  let filter;\n\n  if (expectedFilter === 'Body parts') {\n    filter = 'bodypart';\n  } else if (expectedFilter === 'Muscles') {\n    filter = 'muscles';\n  } else if (expectedFilter === 'Equipment') {\n    filter = 'equipment';\n  }\n\n  if (!filter || !name) {\n    show(refs.subexercisesTextNoFound);\n    hideLoader(refs.loaderModal);\n    return;\n  }\n\n  hide(refs.exercisesGalleryEl);\n  hide(refs.subexercisesTextNoFound);\n  show(refs.subexercisesSearchForm);\n  show(refs.subexercisesFilteredCards);\n  show(refs.exercisesSubtitle);\n  refs.exercisesSubtitle.textContent = `${name}`;\n  refs.subexercisesFilteredCards.innerHTML = '';\n\n  try {\n    const { results, totalPages } = await searchExerciseByFilters({\n      filter: filter,\n      name: name,\n      keyword: getParams.keyword,\n      limit: getParams.limit,\n      page: getParams.page,\n    });\n\n    if (totalPages < 1) {\n      show(refs.subexercisesTextNoFound);\n      hideLoader(refs.loaderModal);\n      return;\n    }\n\n    renderCards(results);\n\n    scrollTo(refs.subexercisesFilteredCards);\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  } finally {\n    hideLoader(refs.loaderModal);\n\n    // if (refs.exercisesBtnEl.classList.contains('is-clicked')) {\n    //   // Очищаємо дані\n    //   filter = '';\n    //   name = '';\n    // } else {\n    //   // Додаємо слухача до форми\n    //   refs.subexercisesSearchForm.addEventListener('submit', handleSearch);\n    // }\n  }\n\n  refs.subexercisesSearchForm.addEventListener('submit', handleSearch);\n\n  async function handleSearch(evt) {\n    evt.preventDefault();\n\n    if (refs.exercisesGalleryEl) {\n      hide(refs.subexercisesFilteredCards);\n      hide(refs.subexercisesSearchForm);\n    }\n\n    const formData = evt.currentTarget;\n    getParams.keyword = formData.query.value.trim();\n\n    console.log(getParams.keyword);\n\n    if (!getParams.keyword) {\n      hideLoader(refs.loaderModal);\n      console.log('input keyword');\n    }\n\n    show(refs.subexercisesSearchForm);\n    hide(refs.subexercisesTextNoFound);\n    showLoader(refs.loaderModal);\n    refs.subexercisesFilteredCards.innerHTML = '';\n\n    try {\n      const { results, totalPages } = await searchExerciseByFilters({\n        filter: filter,\n        name: name,\n        keyword: getParams.keyword,\n        limit: getParams.limit,\n        page: getParams.page,\n      });\n\n      if (totalPages < 1) {\n        show(refs.subexercisesTextNoFound);\n        hideLoader(refs.loaderModal);\n        return;\n      }\n\n      renderCards(results);\n\n      scrollTo(refs.subexercisesFilteredCards);\n    } catch (error) {\n      console.error('Error fetching request:', error);\n    } finally {\n      hideLoader(refs.loaderModal);\n      refs.subexercisesSearchForm.reset();\n      getParams.keyword = '';\n      refs.subexercisesSearchForm.removeEventListener('submit', handleSearch);\n    }\n  }\n}\n\nrefs.subexercisesFilteredCards.addEventListener(\n  'click',\n  handleClickOnCardStart\n);\n\n// request to modal window\nfunction handleClickOnCardStart(evt) {\n  if (!evt.target.dataset.id) {\n    return;\n  }\n\n  const exerciseId = evt.target.dataset.id;\n  createModalMenu(exerciseId);\n}\n\n// request to server\nasync function searchExerciseByFilters({ filter, name, keyword, limit, page }) {\n  const response = await axios.get(`${BASE_URL}/${ENDPOINT_EXERCISES}`, {\n    params: {\n      [filter]: name,\n      keyword: keyword,\n      limit: limit,\n      page: page,\n    },\n  });\n  return response.data;\n}\n\n// renderCards\nfunction renderCards(results) {\n  const markup = results.map(result => createCard(result)).join('');\n  refs.subexercisesFilteredCards.innerHTML = markup;\n}\n\n// create Card\nfunction createCard({\n  _id,\n  rating,\n  name,\n  burnedCalories,\n  time,\n  bodyPart,\n  target,\n}) {\n  return `<li class=\"filtered-card-item\">\n        <div class=\"card-box-workout\">\n\n          <div class=\"card-box-info\">\n            <div class=\"filtered-workout\">Workout</div>\n            <div class=\"card-box-rating\">\n              <p class=\"filtered-rating\">${Math.round(rating)}</p>\n              <svg class=\"filtered-star\" width=\"16\" height=\"16\">\n                <use href=\"${icons}#icon-Star-1\"></use>\n              </svg>\n            </div>\n          </div>\n\n          <button class=\"to-favorites-start\" type=\"click\" data-id=${_id}>\n            <span data-id=${_id}>Start</span>\n            <svg data-id=${_id} class=\"filtered-start\" width=\"16\" height=\"16\">\n              <use href=\"${icons}#icon-arrow-right\"></use>\n            </svg>\n          </button>\n\n        </div>\n\n        <div class=\"card-box-title\">\n          <div class=\"filtered-athlete-box\">\n            <svg class=\"filtered-athlete\" width=\"16\" height=\"16\">\n              <use href=\"${icons}#icon-Man\"></use>\n            </svg>\n          </div>\n          <h3 class=\"filtered-title\">${name}</h3>\n        </div>\n\n        <ul class=\"filtered-description\">\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Burned calories: <span class=\"filtered-descr-value\">${burnedCalories} / ${time} min</span></p>\n          </li>\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Body part: <span class=\"filtered-descr-value\">${\n              bodyPart.charAt(0).toUpperCase() + bodyPart.slice(1)\n            }</span></p>\n          </li>\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Target: <span class=\"filtered-descr-value\">${\n              target.charAt(0).toUpperCase() + target.slice(1)\n            }</span></p>\n          </li>\n        </ul>\n  </li>`;\n}\n\nexport { renderExerciseByFilterName };\n"],"names":["BASE_URL","ENDPOINT_EXERCISES","screenWidth","getParams","renderExerciseByFilterName","expectedFilter","name","refs","hide","filter","show","hideLoader","results","totalPages","searchExerciseByFilters","renderCards","scrollTo","error","handleSearch","evt","formData","showLoader","handleClickOnCardStart","exerciseId","createModalMenu","keyword","limit","page","axios","markup","result","createCard","_id","rating","burnedCalories","time","bodyPart","target","icons"],"mappings":"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"}