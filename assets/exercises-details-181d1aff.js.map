{"version":3,"file":"exercises-details-181d1aff.js","sources":["../../src/js/exercises-details.js"],"sourcesContent":["import axios from 'axios';\nimport { hide, show, hideLoader, showLoader } from './services/visibility';\nimport { refs } from './templates/refs.js';\nimport { scrollTo } from './services/scrollTo.js';\nimport { renderModalMenu } from './modal-menu.js';\nimport icons from '/img/icons/symbol-defs.svg';\n\nconst BASE_URL = 'https://energyflow.b.goit.study/api';\nconst ENDPOINT_EXERCISES = 'exercises';\n\nconst screenWidth = window.innerWidth;\n\nconst getParams = {\n  filter: '',\n  keyword: '',\n  page: 1,\n  limit: 9,\n};\n\nlet filter = '';\nlet name = '';\n\nif (screenWidth < 1440) {\n  getParams.limit = 8;\n} else {\n  getParams.limit = 9;\n}\n\nasync function renderExerciseByFilterName(expectedFilter, expectedName) {\n  name = expectedName;\n\n  if (expectedFilter === 'Body parts') {\n    filter = 'bodypart';\n  } else if (expectedFilter === 'Muscles') {\n    filter = 'muscles';\n  } else if (expectedFilter === 'Equipment') {\n    filter = 'equipment';\n  }\n\n  if (!filter || !name) {\n    show(refs.subexercisesTextNoFound);\n    hideLoader(refs.loaderModal);\n    return;\n  }\n\n  hide(refs.subexercisesTextNoFound);\n  show(refs.subexercisesSearchForm);\n  show(refs.subexercisesFilteredCards);\n  show(refs.exercisesSubtitle);\n  refs.exercisesSubtitle.textContent = `${name}`;\n  refs.subexercisesFilteredCards.innerHTML = '';\n\n  try {\n    const { results, totalPages } = await searchExerciseByFilters({\n      filter: filter,\n      name: name,\n      keyword: getParams.keyword,\n      limit: getParams.limit,\n      page: getParams.page,\n    });\n\n    if (totalPages < 1) {\n      show(refs.subexercisesTextNoFound);\n      hideLoader(refs.loaderModal);\n      return;\n    }\n\n    renderCards(results);\n\n    scrollTo(refs.subexercisesFilteredCards);\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  } finally {\n    hideLoader(refs.loaderModal);\n  }\n}\n\n// refs.exercisesBtnEl.addEventListener('click', changeRequest);\n\n// function changeRequest(evt) {\n//   evt.preventDefault();\n//   getParams.keyword = '';\n//   console.log(getParams.keyword);\n//   getParams.page = 1;\n//   filter = '';\n//   name = '';\n//   console.log('changimg');\n//   return;\n// }\n\nrefs.subexercisesSearchForm.addEventListener('submit', handleSearch);\n\nasync function handleSearch(evt) {\n  evt.preventDefault();\n\n  const formData = evt.currentTarget;\n  getParams.keyword = formData.query.value.trim();\n\n  console.log(getParams.keyword);\n  console.log(filter);\n  console.log(name);\n\n  if (!getParams.keyword) {\n    hideLoader(refs.loaderModal);\n    console.log('input keyword');\n  }\n\n  show(refs.subexercisesSearchForm);\n  hide(refs.subexercisesTextNoFound);\n  showLoader(refs.loaderModal);\n  refs.subexercisesFilteredCards.innerHTML = '';\n\n  try {\n    const { results, totalPages } = await searchExerciseByFilters({\n      filter: filter,\n      name: name,\n      keyword: getParams.keyword,\n      limit: getParams.limit,\n      page: getParams.page,\n    });\n\n    if (totalPages < 1) {\n      show(refs.subexercisesTextNoFound);\n      refs.subexercisesFilteredCards.innerHTML = '';\n      hideLoader(refs.loaderModal);\n      return;\n    }\n\n    renderCards(results);\n\n    scrollTo(refs.subexercisesFilteredCards);\n  } catch (error) {\n    console.error('Error fetching request:', error);\n  } finally {\n    hideLoader(refs.loaderModal);\n    refs.subexercisesSearchForm.reset();\n    getParams.keyword = '';\n  }\n}\n\nrefs.subexercisesFilteredCards.addEventListener(\n  'click',\n  handleClickOnCardStart\n);\n\n// request to modal window\nfunction handleClickOnCardStart(evt) {\n  if (!evt.target.dataset.id) {\n    return;\n  }\n\n  const exerciseId = evt.target.dataset.id;\n  // showLoader(refs.loaderModal);\n  renderModalMenu(exerciseId);\n}\n\n// request to server\nasync function searchExerciseByFilters({ filter, name, keyword, limit, page }) {\n  const response = await axios.get(`${BASE_URL}/${ENDPOINT_EXERCISES}`, {\n    params: {\n      [filter]: name,\n      keyword: keyword,\n      limit: limit,\n      page: page,\n    },\n  });\n  return response.data;\n}\n\n// renderCards\nfunction renderCards(results) {\n  const markup = results.map(result => createCard(result)).join('');\n  refs.subexercisesFilteredCards.innerHTML = markup;\n}\n\n// create Card\nfunction createCard({\n  _id,\n  rating,\n  name,\n  burnedCalories,\n  time,\n  bodyPart,\n  target,\n}) {\n  return `<li class=\"filtered-card-item\">\n        <div class=\"card-box-workout\">\n\n          <div class=\"card-box-info\">\n            <div class=\"filtered-workout\">Workout</div>\n            <div class=\"card-box-rating\">\n              <p class=\"filtered-rating\">${rating.toFixed(1)}</p>\n              <svg class=\"filtered-star\" width=\"16\" height=\"16\">\n                <use href=\"${icons}#icon-Star-1\"></use>\n              </svg>\n            </div>\n          </div>\n\n          <button class=\"to-favorites-start\" type=\"click\" data-id=${_id}>\n            <span data-id=${_id}>Start</span>\n            <svg data-id=${_id} class=\"filtered-start\" width=\"16\" height=\"16\">\n              <use href=\"${icons}#icon-arrow-right\"></use>\n            </svg>\n          </button>\n\n        </div>\n\n        <div class=\"card-box-title\">\n          <div class=\"filtered-athlete-box\">\n            <svg class=\"filtered-athlete\" width=\"16\" height=\"16\">\n              <use href=\"${icons}#icon-Man\"></use>\n            </svg>\n          </div>\n          <h3 class=\"filtered-title\">${name}</h3>\n        </div>\n\n        <ul class=\"filtered-description\">\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Burned calories: <span class=\"filtered-descr-value\">${burnedCalories} / ${time} min</span></p>\n          </li>\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Body part: <span class=\"filtered-descr-value\">${\n              bodyPart.charAt(0).toUpperCase() + bodyPart.slice(1)\n            }</span></p>\n          </li>\n          <li class=\"filtered-descr-item\">\n            <p class=\"filtered-descr-title\">Target: <span class=\"filtered-descr-value\">${\n              target.charAt(0).toUpperCase() + target.slice(1)\n            }</span></p>\n          </li>\n        </ul>\n  </li>`;\n}\n\nexport { renderExerciseByFilterName };\n"],"names":["BASE_URL","ENDPOINT_EXERCISES","screenWidth","getParams","filter","name","renderExerciseByFilterName","expectedFilter","expectedName","show","refs","hideLoader","hide","results","totalPages","searchExerciseByFilters","renderCards","scrollTo","error","handleSearch","evt","formData","showLoader","handleClickOnCardStart","exerciseId","renderModalMenu","keyword","limit","page","axios","markup","result","createCard","_id","rating","burnedCalories","time","bodyPart","target","icons"],"mappings":"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"}