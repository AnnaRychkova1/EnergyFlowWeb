{"version":3,"file":"modal-menu-4ad1c539.js","sources":["../../src/img/icons/symbol-defs.svg","../../src/js/modal-menu.js"],"sourcesContent":["export default \"__VITE_ASSET__1950cb8b__\"","import axios from 'axios';\nimport { hide, show } from './services/visibility';\nimport icons from '../img/icons/symbol-defs.svg';\nimport { refs } from './templates/refs';\n\n// const heartIcon = `\n// // <svg class=\"icon-heart\" width=\"18\" height=\"18\">\n// //     <use href=\"${icons}#icon-heart\"></use>\n// // </svg>`;\n\nlet expectedId;\nasync function renderModalMenu(expectedExercisesId) {\n  show(refs.backdrop);\n  expectedId = expectedExercisesId;\n\n  try {\n    const responseIdObject = await getCardInfo(expectedId);\n    // console.log(responseIdObject);\n    modalWindowMarkup(responseIdObject);\n\n    console.log(expectedId);\n\n    const addToFavoriteBtn = document.querySelector('.ex-add-favorite');\n    addToFavoriteBtn.addEventListener('click', addToFavoriteOnClick);\n    function addToFavoriteOnClick(event) {\n      const exerciseId = event.target.dataset.id || expectedId;\n      const exerciseName = document.querySelector('.exercise-name').textContent;\n      const exerciseBodyPart = document.querySelector(\n        '.exercise-information .ex-block:nth-child(1).exercise-label'\n      ).textContent;\n      const exerciseEquipment = document.querySelector(\n        '.exercise-information .ex-block:nth-child(2).exercise-label'\n      ).textContent;\n      const exerciseTime = document.querySelector(\n        '.exercise-information .ex-block:nth-child(3).exercise-label'\n      ).textContent;\n      const exerciseTarget = document.querySelector(\n        '.exercise-information .ex-block:nth-child(4).exercise-label'\n      ).textContent;\n      const exerciseBurnedCalories = document.querySelector(\n        '.exercise-information .ex-block:nth-child(5).exercise-label'\n      ).textContent;\n      const exerciseGifUrl = document.querySelector('.exercise-gif img').src;\n      let favorites =\n        JSON.parse(localStorage.getItem('exerciseFavorites')) || [];\n      const isFavorite = favorites.some(\n        favorite => favorite._id === exerciseId\n      );\n      if (isFavorite) {\n        event.target.textContent = 'Add to favorites';\n      } else {\n        event.target.textContent = 'Remove from favorites';\n      }\n      if (isFavorite) {\n        favorites = favorites.filter(favorite => favorite._id !== exerciseId);\n        localStorage.setItem('exerciseFavorites', JSON.stringify(favorites));\n      } else {\n        const newExercise = {\n          _id: exerciseId,\n          name: exerciseName,\n          bodyPart: exerciseBodyPart,\n          equipment: exerciseEquipment,\n          time: exerciseTime,\n          target: exerciseTarget,\n          burnedCalories: exerciseBurnedCalories,\n          gifUrl: exerciseGifUrl,\n        };\n        favorites.push(newExercise);\n        localStorage.setItem('exerciseFavorites', JSON.stringify(favorites));\n      }\n    }\n\n    const closeButton = document.querySelector('.modal-close-btn');\n    closeButton.addEventListener('click', closeModal);\n    document.addEventListener('keydown', escapeClickHandler);\n    // refs.backdrop.addEventListener('click', backdropClickHandler);\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  }\n}\n\nasync function getCardInfo(exerciseId) {\n  console.log(exerciseId);\n  try {\n    const BASE_URL = 'https://energyflow.b.goit.study/api';\n    const ENDPOINT = 'exercises';\n    const { data } = await axios.get(`${BASE_URL}/${ENDPOINT}/${exerciseId}`);\n    return data;\n  } catch (err) {\n    console.error(err);\n  }\n}\n\nfunction modalWindowMarkup({\n  _id,\n  bodyPart,\n  equipment,\n  time,\n  target,\n  burnedCalories,\n  gifUrl,\n  name,\n  popularity,\n  rating,\n  description,\n}) {\n  let fillUpStarsRating = rating.toFixed(1);\n  const markup = `\n  <div class=\"modal-container\">\n\n    <button class=\"modal-close-btn\">\n      <svg\n          class=\"modal-close-icon\"\n          width=\"24\"\n          height=\"24\">\n          <use href=\"${icons}#icon-x\"></use>\n      </svg>\n    </button>\n\n    <img\n      class=\"gif-ex\"\n      src=\"${gifUrl}\"\n      alt=\"${name}\"\n    />\n  \n    <div class=\"ex-box-info\">\n\n      <h3 class=\"ex-title\">${name}</h3>\n\n      <div class=\"ex-rating-container\">\n        <p class=\"ex-current-rating\">${fillUpStarsRating}</p>\n        <ul class=\"ex-stars-list\">\n          <li>\n            <svg\n              class=\"ex-rate-icon selected-stars\"\n              width=\"18\"\n              height=\"18\"\n              aria-label=\"rating icon\"\n            >\n              <use href=\"../img/icons/symbol-defs.svg#icon-Star-1\"></use>\n            </svg>\n          </li>\n          <li>\n            <svg\n              class=\"ex-rate-icon selected-stars\"\n              width=\"18\"\n              height=\"18\"\n              aria-label=\"rating icon\"\n            >\n              <use href=\"../img/icons/symbol-defs.svg#icon-Star-1\"></use>\n            </svg>\n          </li>\n          <li>\n            <svg\n              class=\"ex-rate-icon selected-stars\"\n              width=\"18\"\n              height=\"18\"\n              aria-label=\"rating icon\"\n            >\n              <use href=\"../img/icons/symbol-defs.svg#icon-Star-1\"></use>\n            </svg>\n          </li>\n          <li>\n            <svg\n              class=\"ex-rate-icon selected-stars\"\n              width=\"18\"\n              height=\"18\"\n              aria-label=\"rating icon\"\n            >\n              <use href=\"../img/icons/symbol-defs.svg#icon-Star-1\"></use>\n            </svg>\n          </li>\n          <li>\n            <svg\n              class=\"ex-rate-icon\"\n              width=\"18\"\n              height=\"18\"\n              aria-label=\"rating icon\"\n            >\n              <use href=\"../img/icons/symbol-defs.svg#icon-Star-1\"></use>\n            </svg>\n          </li>\n        </ul>\n      </div>\n\n      <div class=\"ex-information\">\n        <div class=\"ex-block\">\n          <span class=\"ex-value\">Target</span>\n          <span class=\"ex-label\">${\n            target.charAt(0).toUpperCase() + target.slice(1)\n          }</span>\n        </div>\n        <div class=\"ex-block\">\n          <span class=\"ex-value\">Body part</span>\n          <span class=\"ex-label\">${\n            bodyPart.charAt(0).toUpperCase() + bodyPart.slice(1)\n          }</span>\n        </div>\n        <div class=\"ex-block\">\n          <span class=\"ex-value\">Equipment</span>\n          <span class=\"ex-label\">${\n            equipment.charAt(0).toUpperCase() + equipment.slice(1)\n          }</span>\n        </div>\n        <div class=\"ex-block\">\n          <span class=\"ex-value\">Popular</span>\n          <span class=\"ex-label\">${popularity}</span>\n        </div>\n        <div class=\"ex-block\">\n          <span class=\"ex-value\">Burned calories</span>\n          <span class=\"ex-label\">${burnedCalories}/${time} min</span>\n        </div>\n      </div>\n\n      <p class=\"ex-description\">${description}</p>\n\n      <div class=\"ex-add-btn-container\">\n        <button type=\"button\" data-id=\"${_id}\" class=\"ex-add-favorite\">\n          Add to favorites\n          <svg\n            class=\"heart-svg\"\n            width=\"18\"\n            height=\"16\">\n            <use href=\"${icons}#icon-heart\"></use>\n          </svg>\n        </button>\n        <button type=\"button\" data-id=\"${_id}\" class=\"ex-rating-button\">\n          Give a rating\n        </button>\n      </div>  \n    </div>\n  </div>\n    `;\n\n  refs.backdrop.innerHTML = markup;\n  renderStars(Math.round(rating));\n\n  function renderStars(number) {\n    const star = document.querySelectorAll('.ex-rate-icon');\n    const arrayOfStars = [...star];\n    for (let i = 0; i < number; i += 1) {\n      arrayOfStars[i].classList.add('.selected-stars');\n    }\n  }\n}\n\nfunction closeModal() {\n  hide(refs.backdrop);\n  document.removeEventListener('click', closeModal);\n  document.removeEventListener('keydown', escapeClickHandler);\n  if (document.contains(refs.backdrop)) {\n    refs.backdrop.removeEventListener('click', backdropClickHandler);\n  }\n}\nfunction backdropClickHandler(event) {\n  if (event.target === refs.backdrop) {\n    closeModal();\n  }\n  closeModal();\n}\n\nexport function onEscape(event) {\n  event.preventDefault();\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n}\n\nexport { renderModalMenu };\n"],"names":["icons","expectedId","renderModalMenu","expectedExercisesId","show","refs","addToFavoriteOnClick","event","exerciseId","exerciseName","exerciseBodyPart","exerciseEquipment","exerciseTime","exerciseTarget","exerciseBurnedCalories","exerciseGifUrl","favorites","isFavorite","favorite","newExercise","responseIdObject","getCardInfo","modalWindowMarkup","closeModal","error","BASE_URL","ENDPOINT","data","axios","err","_id","bodyPart","equipment","time","target","burnedCalories","gifUrl","name","popularity","rating","description","fillUpStarsRating","markup","renderStars","number","arrayOfStars","i","hide","backdropClickHandler","onEscape"],"mappings":"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"}