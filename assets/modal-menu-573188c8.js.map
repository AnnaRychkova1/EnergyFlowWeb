{"version":3,"file":"modal-menu-573188c8.js","sources":["../../src/img/icons/symbol-defs.svg","../../src/js/modal-menu.js"],"sourcesContent":["export default \"__VITE_ASSET__58b6efc7__\"","// import { exerciseId } from './exercises-details'\nimport axios from 'axios';\nimport { hide, show, showLoader, hideLoader} from './services/visibility';\nimport icons from '../img/icons/symbol-defs.svg'\nconst BASE_URL = 'https://energyflow.b.goit.study/api';\nconst ENDPOINT_EXERCISES = 'exercises';\n\n\n// , getLoader\nconst gallery = document.querySelector('.results'); // плюс название содержимого карточки //\nconst backdrop = document.querySelector('.backdrop');\nconst modalCard = document.querySelector('.modal');\nconst favorites = document.querySelector('.ex-add-favorite');\nconst exerciseId = '64f389465ae26083f39b17c0';\n\nconst heartIcon = `\n// <svg class=\"icon-heart\" width=\"18\" height=\"18\">\n//     <use href=\"${icons}#icon-heart\"></use>\n// </svg>`;\n\n\nrenderCard();\nlet storage = 'favorites';\nlet storageItem = localStorage.getItem(storage);\nif (!storageItem) {\n    storageItem = [];\n} else {\n    storageItem = JSON.parse(storageItem);\n}\n\n// gallery.addEventListener('click', onClickCardContent);\n// async function onClickCardContent(event) {\n//     if (event.target === event.currentTarget) {\n//         return;\n//     }\n//   const element = event.target.closest('.to-favorites-start');\n//   if (element === null) {\n//         return;\n//     }\n//     getLoader();\n//     const elementId = element.dataset.id;\n//     const exercisesInfo = await getCardInfo(elementId);\n\n//     backdrop.classList.remove('is-hidden');\n//   modalCard.innerHTML = '';\n//   hideLoader();\n// }\n\n  const addToFavoriteBtn = document.querySelector('.ex-add-favorite');\n  addToFavoriteBtn.addEventListener('click', addToFavoriteOnClick);\n\n  const closeBtn = document.querySelector('.modal-close-btn');\n  closeBtn.addEventListener('click', onCloseModal);\n  backdrop.addEventListener('click', handleBackdropClick);\n  document.addEventListener('keydown', handleEscapeKey);\n \nasync function addToFavoriteOnClick(event) {\n  const element = event.target.closest('.ex-add-favorite');\n  if (!element) return;\n\n  const elementId = element.dataset.id;\n  const favorites = JSON.parse(localStorage.getItem('favorites')) || [];\n\n  const isFavorite = favorites.some(item => item._id === elementId);\n\n  if (isFavorite) {\n    const updatedFavorites = favorites.filter(item => item._id !== elementId);\n    localStorage.setItem('favorites', JSON.stringify(updatedFavorites));\n    element.classList.remove('is-favorite');\n    element.innerHTML = changingButtonName('add');\n  } else {\n    const exercisesCardInfo = await getCardInfo(elementId);\n    localStorage.setItem('favorites', JSON.stringify([...favorites, exercisesCardInfo]));\n    element.classList.add('is-favorite');\n    element.innerHTML = changingButtonName('remove');\n  }\n}\nfunction onCloseModal() {\n  modalCard.classList.add('is-hidden');\n  backdrop.classList.add('is-hidden');\n  modalCard.innerHTML = '';\n\n  document.removeEventListener('keydown', handleEscapeKey);\n  backdrop.removeEventListener('click', handleBackdropClick);\n}\nfunction handleBackdropClick(event) {\n  if (event.target.closest('.modal')) {\n    return;\n  }\n  modalCard.classList.add('is-hidden');\n  backdrop.classList.add('is-hidden');\n  modalCard.innerHTML = '';\n\n  document.removeEventListener('keydown', handleEscapeKey);\n  backdrop.removeEventListener('click', handleBackdropClick);\n}\nfunction handleEscapeKey(event) {\n  event.preventDefault();\n  if (event.key === 'Escape') {\n    modalCard.classList.add('is-hidden');\n    backdrop.classList.add('is-hidden');\n    modalCard.innerHTML = '';\n\n    document.removeEventListener('keydown', handleEscapeKey);\n    backdrop.removeEventListener('click', handleBackdropClick);\n  }\n}\n\n// const exerciseId = '64f389465ae26083f39b17c0';\nasync function getCardInfo(exerciseId) {\n    try {\n        const { data } = await axios.get(`${BASE_URL}/${ENDPOINT_EXERCISES}/${exerciseId}`);\n        return data;\n    } catch (err) {\n        console.error(err);\n    }\n}\n\n\n// function changingButtonName(value = 'add') {\n//   if (value === 'add') {\n//     return `Add to favorites\n//         <svg class=\"icon-heart\" width=\"18\" height=\"18\">\n//           <use href=\"${heartIcon}#icon-heart\"></use>\n//         </svg>`;\n//   } else {\n//     return `Remove from\n//         <svg class=\"icon-heart\" width=\"18\" height=\"18\">\n//           <use href=\"${heartIcon}#icon-heart\"></use>\n//         </svg>`;\n\n\nasync function renderCard() {\n    try {\n      const { results } = await getCardInfo(exerciseId);\n      modalWindowMarkup(results);\n      console.log(results)\n    } catch (error) {\n        console.error(error.message);\n    } finally {\n\n    }\n}\n\n// modalCard.innerHTML = modalWindowMarkup(results);\nfunction modalWindowMarkup(results = {}) {\n   const {\n    _id,\n    bodyPart,\n    equipment,\n    time,\n    target,\n    burnedCalories,\n    gifUrl,\n    name,\n    popularity,\n    rating,\n    description,\n  } = results;\n     const markup =\n         `<div class=\"modal\">\n            <button class=\"modal-close-btn\">\n                <svg\n                    class=\"modal-close-icon\"\n                    width=\"24\"\n                    height=\"24\">\n                    <use href=\"${icons}#icon-x\"></use>\n                </svg>\n            </button>\n            <div class=\"exercise-gif\">\n              <picture>\n                <source\n                  media=\"(max-width:767.98px)\"\n                  type=\"gif\"\n                  width=\"295\"\n                  height=\"258\"\n                  />\n                <source\n                  media=\"(min-width:768px)\"\n                  type=\"gif\"\n                  width=\"270\"\n                  height=\"259\"\n                  />\n                  <img\n                    class=\"gif-ex\"\n                    src=\"${gifUrl}\"\n                    width=\"295\"\n                    height=\"258\"\n                    alt=\"${name}\"\n                  />\n              </picture>   \n            </div>\n            <div class=\"ex-content-container\">\n                <h3 class=\"exercise-name\">${name}</h3>\n                <p class=\"ex-current-rating\">${rating}</p>\n                <ul class=\"exercise-stars-list\">\n                    ${renderStars(popularity)}\n                </ul>\n\n                <div class=\"exercise-information\">\n                    <div class=\"ex-block\">\n                        <span class=\"exercise-value\">Target</span>\n                        <span class=\"exercise-label\">${target}</span>\n                    </div>\n                    <div class=\"ex-block\">\n                        <span class=\"exercise-value\">Body part</span>\n                        <span class=\"exercise-label\">${bodyPart}</span>\n                    </div>\n                    <div class=\"ex-block\">\n                        <span class=\"exercise-value\">Equipment</span>\n                        <span class=\"exercise-label\">${equipment}</span>\n                    </div>\n                    <div class=\"ex-block\">\n                        <span class=\"exercise-value\">Popular</span>\n                        <span class=\"exercise-label\">${popularity}</span>\n                    </div>\n                    <div class=\"ex-block\">\n                        <span class=\"exercise-value\">Burned calories</span>\n                        <span class=\"exercise-label\">${burnedCalories}/3 min</span>\n                    </div>\n\n                    <p class=\"exercise-description\">\n                        ${description}\n                    </p>\n\n                    <div class=\"ex-add-btn\">\n                        <button data-id=\"${_id}\" class=\"add-btn-icon\">\n                            Add to favorites\n                            <svg\n                                class=\"heart-svg\"\n                                width=\"18\"\n                                height=\"18\">\n                                <use href=\"use href=\"${icons}#icon-heart\"></use>\n                            </svg>\n                        </button>\n                         <button data-id=\"${_id}\" class=\"ex-rating-button\">\n                           Give a rating\n                         </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `;\n   return modalCard.innerHTML = markup;\n}\n\nfunction renderStars(rating) {\n    const filledStar = '<span class=\"star\">&#9733;</span>';\n    const emptyStar = '<span class=\"star\">&#9734;</span>';\n    const filledStars = filledStar.repeat(Math.floor(rating));\n    const halfStar = rating % 1 !== 0 ? '<span class=\"star\">&#9733;</span>' : '';\n    const emptyStars = emptyStar.repeat(5 - Math.ceil(rating));\n    return filledStars + halfStar + emptyStars;\n}\n\n\nexport { getCardInfo, renderCard }\n\n\n\n\n\n\n\n\n\n    \n    \n    \n    \n    \n// }\n// const startBtn = document.querySelector('.start-btn');\n// const modalEl = document.querySelector('.modal-backdrop');\n\n// startBtn.addEventListener('click', handleSearch);\n\n// function handleSearch(event) {\n//   event.preventDefault();\n//   fetchExercises().then(modalWindowMarkup).catch();\n// }\n\n// function fetchExercises() {\n//   return fetch(\n//     'https://energyflow.b.goit.study/api/exercises/64f389465ae26083f39b17a2'\n//   ).then(resp => {\n//     if (!resp.ok) {\n//       throw new Error(resp.statusText);\n//     }\n//     return resp.json();\n//   });\n// }\n\n// function modalWindowMarkup(filters = {}) {\n//   const {\n//     _id,\n//     bodyPart,\n//     equipment,\n//     time,\n//     target,\n//     burnedCalories,\n//     gifUrl,\n//     name,\n//     popularity,\n//     rating,\n//     description,\n//   } = filters;\n\n//   const markup = `<div class=\"exercises-modal-window\">\n//           <div class=\"exercise-container\">\n//             <button class=\"exercise-close-btn\" type=\"button\">\n//               <svg\n//                 class=\"exercise-close-icon\"\n//                 width=\"10\"\n//                 height=\"10\"\n//                 aria-label=\"Close icon\"\n//               >\n//                 <use href=\"../svg/icons.svg#icon-close-btn\"></use>\n//               </svg>\n//             </button>\n//             <div class=\"exercise-image-wrapper\">\n//               <img\n//                 src=\"${gifUrl}\"\n//                 alt=\"\"\n//                 class=\"exercise-image-modal\"\n//               />\n//             </div>\n//             <div class=\"exercise-info-wrapper\">\n//               <div class=\"exercise-name-container\">\n//                 <p class=\"exercise-name\">${name}</p>\n//                 <p class=\"exercise-rating\">${rating}</p>\n//               </div>\n//               <div class=\"exercise-params-container\">\n//                 <ul class=\"exercise-params-list\">\n//                   <li class=\"exercise-params-card\">\n//                     <p class=\"exercise-param-name\">Target</p>\n//                     <p class=\"exercise-param-value exercise-param-target\">${target}</p>\n//                   </li>\n//                   <li class=\"exercise-params-card\">\n//                     <p class=\"exercise-param-name\">Body part</p>\n//                     <p class=\"exercise-param-value exercise-param-bodypart\">${bodyPart}</p>\n//                   </li>\n//                   <li class=\"exercise-params-card\">\n//                     <p class=\"exercise-param-name\">Equipment</p>\n//                     <p class=\"exercise-param-value exercise-param-equipment\">${equipment}</p>\n//                   </li>\n//                   <li class=\"exercise-params-card\">\n//                     <p class=\"exercise-param-name\">Popular</p>\n//                     <p class=\"exercise-param-value exercise-param-popularuty\">${popularity}</p>\n//                   </li>\n//                   <li class=\"exercise-params-card\">\n//                   <p class=\"exercise-param-name\">Burned calories</p>\n//                   <p class=\"exercise-param-value exercise-param-popularuty\">${burnedCalories}/${time} m</p></li>\n//                 </ul>\n                \n//               </div>\n//               <p class=\"exercise-descr\">${description}</p>\n//               <div class=\"exercise-buttons\">\n//                 <button\n//                   class=\"exercise-favorite-btn\"\n//                   type=\"submit\"\n//                   data=\"${_id}\"\n//                 >\n//                   Add to favorites\n//                   <svg\n//                   class=\"exercise-fav-icon\"\n//                   aria-label=\"Heart icon\"\n//                   >\n//                   <use href=\"../svg/icons.svg#icon-heart\"></use>\n//                   </svg>\n//                 </button>\n//                 <button class=\"exercise-raiting-btn\" type=\"submit\" data=\"${_id}\">\n//                   Give a rating\n//                 </button>\n//               </div>\n//             </div>\n//           </div>\n//         </div>`;\n\n//   modalEl.innerHTML = markup;\n// }\n\n\nasync function searchExerciseByID(id) {\n  try {\n    const { data } = await axios.get(`${BASE_URL}/${ENDPOINT_FILTER}/${exerciseId}`);\n    return data;\n  } catch (err) {\n    console.error(err);\n  }\n}"],"names":["icons","BASE_URL","ENDPOINT_EXERCISES","backdrop","modalCard","exerciseId","renderCard","storage","storageItem","addToFavoriteBtn","addToFavoriteOnClick","closeBtn","onCloseModal","handleBackdropClick","handleEscapeKey","event","element","elementId","favorites","item","updatedFavorites","exercisesCardInfo","getCardInfo","data","axios","err","results","modalWindowMarkup","error","_id","bodyPart","equipment","time","target","burnedCalories","gifUrl","name","popularity","rating","description","markup","renderStars","filledStar","emptyStar","filledStars","halfStar","emptyStars"],"mappings":"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"}