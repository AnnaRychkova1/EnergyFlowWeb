{"version":3,"file":"modal-menu-afaba17c.js","sources":["../../src/img/icons/symbol-defs.svg","../../src/js/modal-menu.js"],"sourcesContent":["export default \"__VITE_ASSET__bf1dda18__\"","import axios from 'axios';\nimport { hide, show, showLoader, hideLoader } from './services/visibility';\nimport icons from '../img/icons/symbol-defs.svg';\n\nconst BASE_URL = 'https://energyflow.b.goit.study/api';\n\nconst gallery = document.querySelector('.results'); // плюс название содержимого карточки //\nconst backdrop = document.querySelector('.backdrop');\nconst modalCard = document.querySelector('.modal');\nconst favorites = document.querySelector('.ex-add-favorite');\n\nconst heartIcon = `\n// <svg class=\"icon-heart\" width=\"18\" height=\"18\">\n//     <use href=\"${icons}#icon-heart\"></use>\n// </svg>`;\n\n\nlet expectedId;\n// ! Something like this\nasync function createModalMenu(expectedExercisesId) {\n  expectedId = expectedExercisesId;\n  try {\n   const responseIdObject = await getCardInfo(expectedId);\n    console.log(responseIdObject);\n    modalWindowMarkup(responseIdObject);\n     const addToFavoriteBtn = document.querySelector('.ex-add-favorite');\n    addToFavoriteBtn.addEventListener('click', addToFavoriteOnClick);\n    const closeBtn = document.querySelector('.modal-close-btn');\n  closeBtn.addEventListener('click', onCloseModal);\n    backdrop.classList.remove('is-hidden');\n    console.log(expectedId);\n    \n  function addToFavoriteOnClick(event) {\n  const favorites = JSON.parse(localStorage.getItem('favorites')) || [];\nconsole.log(favorites);\n  const isFavorite = favorites.some(item => item._id === expectedId);\n\n  if (isFavorite) {\n    const updatedFavorites = favorites.filter(item => item._id !== expectedId);\n    localStorage.setItem('favorites', JSON.stringify(updatedFavorites));\n    element.classList.remove('is-favorite');\n    element.innerHTML = changingButtonName('add');\n  } else {\n    \n    // const exercisesCardInfo = await getCardInfo(expectedId);\n    localStorage.setItem(\n      'favorites',\n      JSON.stringify([...favorites, responseIdObject])\n    );\n\n    // there must be event.target\n    element.classList.add('is-favorite');\n    element.innerHTML = changingButtonName('remove');\n  }\n    }\n    \n  } catch (error) {\n    console.error('Error fetching images:', error);\n  }\n}\n\n\nasync function getCardInfo(exerciseId) {\n  console.log(exerciseId);\n  try {\n    const BASE_URL = 'https://energyflow.b.goit.study/api';\n    const ENDPOINT = 'exercises';\n    const { data } = await axios.get(`${BASE_URL}/${ENDPOINT}/${exerciseId}`);\n    return data;\n  } catch (err) {\n    console.error(err);\n  }\n}\n\n\n// ! тут після <p class=\"ex-current-rating\">${rating}</p> <ul class=\"exercise-stars-list\"></ul> я видалила поки що // ${renderStars(popularity)}\nfunction modalWindowMarkup({\n  _id,\n  bodyPart,\n  equipment,\n  time,\n  target,\n  burnedCalories,\n  gifUrl,\n  name,\n  popularity,\n  rating,\n  description,\n}) {\n  const markup =\n    `<div class=\"modal-container\">\n            <button class=\"modal-close-btn\">\n                <svg\n                    class=\"modal-close-icon\"\n                    width=\"24\"\n                    height=\"24\">\n                    <use href=\"${icons}#icon-x\"></use>\n                </svg>\n            </button>\n            <div class=\"exercise-gif\">\n              <picture>\n                <source\n                  media=\"(max-width:767.98px)\"\n                  type=\"gif\"\n                  width=\"295\"\n                  height=\"258\"\n                  />\n                <source\n                  media=\"(min-width:768px)\"\n                  type=\"gif\"\n                  width=\"270\"\n                  height=\"259\"\n                  />\n                  <img\n                    class=\"gif-ex\"\n                    src=\"${gifUrl}\"\n                    width=\"295\"\n                    height=\"258\"\n                    alt=\"${name}\"\n                  />\n              </picture>\n            </div>\n            <div class=\"ex-content-container\">\n                <h3 class=\"exercise-name\">${name}</h3>\n               <div class=\"rating-container\">\n                <p class=\"ex-current-rating\">${rating}</p>\n                <ul class=\"exercise-stars-list\">\n                     \n                </ul>\n                </div>\n                <div class=\"exercise-information\">\n                    <div class=\"ex-block\">\n                        <span class=\"exercise-value\">Target</span>\n                        <span class=\"exercise-label\">${target}</span>\n                    </div>\n                    <div class=\"ex-block\">\n                        <span class=\"exercise-value\">Body part</span>\n                        <span class=\"exercise-label\">${bodyPart}</span>\n                    </div>\n                    <div class=\"ex-block\">\n                        <span class=\"exercise-value\">Equipment</span>\n                        <span class=\"exercise-label\">${equipment}</span>\n                    </div>\n                    <div class=\"ex-block\">\n                        <span class=\"exercise-value\">Popular</span>\n                        <span class=\"exercise-label\">${popularity}</span>\n                    </div>\n                    <div class=\"ex-block\">\n                        <span class=\"exercise-value\">Burned calories</span>\n                        <span class=\"exercise-label\">${burnedCalories}/3 min</span>\n                    </div>\n\n                    <p class=\"exercise-description\">\n                        ${description}\n                    </p>\n\n                    <div class=\"ex-add-btn-container\">\n                        <button data-id=\"${_id}\" class=\"ex-add-favorite\">\n                            Add to favorites\n                            <svg\n                                class=\"heart-svg\"\n                                width=\"18\"\n                                height=\"18\">\n                                <use href=\"${icons}#icon-heart\"></use>\n                            </svg>\n                        </button>\n                         <button data-id=\"${_id}\" class=\"ex-rating-button\">\n                           Give a rating\n                         </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `;\n  \n  modalCard.innerHTML = markup;\n  \n}\n\n\n//   const addToFavoriteBtn = document.querySelector('.ex-add-favorite');\n//   addToFavoriteBtn.addEventListener('click', addToFavoriteOnClick);\n\n//   const closeBtn = document.querySelector('.modal-close-btn');\n//   closeBtn.addEventListener('click', onCloseModal);\n//   backdrop.addEventListener('click', handleBackdropClick);\n//   document.addEventListener('keydown', handleEscapeKey);\n \n// function onCloseModal() {\n//   modalCard.classList.add('is-hidden');\n//   backdrop.classList.add('is-hidden');\n//   modalCard.innerHTML = '';\n\n//   document.removeEventListener('keydown', handleEscapeKey);\n//   backdrop.removeEventListener('click', handleBackdropClick);\n// }\n// function handleBackdropClick(event) {\n//   if (event.target.closest('.modal')) {\n//     return;\n//   }\n//   modalCard.classList.add('is-hidden');\n//   backdrop.classList.add('is-hidden');\n//   modalCard.innerHTML = '';\n\n//   document.removeEventListener('keydown', handleEscapeKey);\n//   backdrop.removeEventListener('click', handleBackdropClick);\n// }\n// function handleEscapeKey(event) {\n//   event.preventDefault();\n//   if (event.key === 'Escape') {\n//     modalCard.classList.add('is-hidden');\n//     backdrop.classList.add('is-hidden');\n//     modalCard.innerHTML = '';\n\n//     document.removeEventListener('keydown', handleEscapeKey);\n//     backdrop.removeEventListener('click', handleBackdropClick);\n//   }\n// }\n// const activeColor = '#eea10c';\n// const noActiveColor = '#e8e8e8';\n// const stars = document.querySelectorAll('.exercise-stars-list li');\n\n\nconst stars = document.querySelectorAll('.ex-rate-icon');\nconst activeColor = '#eea10c';\nconst noActiveColor = '#e8e8e8';\n\n// stars.forEach((star, index) => {\n//   const rating = Number(star.getAttribute('data-rating'));\n//   const starHTML = renderStars(rating);\n//   const filledStarsCount = (starHTML.match(/&#9733;/g) || []).length;\n//   if (index < filledStarsCount) {\n//     star.style.fill = activeColor;\n//   } else {\n//     star.style.fill = noActiveColor;\n//   }\n// });\n\n// function renderStars(rating) {\n//   const filledStar = '<span class=\"star\">&#9733;</span>';\n//   const emptyStar = '<span class=\"star\">&#9734;</span>';\n//   const filledStars = filledStar.repeat(Math.floor(rating));\n//   const halfStar = rating % 1 !== 0 ? '<span class=\"star\">&#9733;</span>' : '';\n//   const emptyStarsCount = Math.max(0, 5 - Math.ceil(rating)); // Ensure non-negative value\n//   const emptyStars = emptyStar.repeat(emptyStarsCount);\n//   return filledStars + halfStar + emptyStars;\n// }\n\nexport { createModalMenu };\n\n\n\n//   function changingButtonName(value = 'add') {\n//     if (value === 'add') {\n//       return `Add to favorites\n//         <svg class=\"icon-heart\" width=\"18\" height=\"18\">\n//           <use href=\"${heartIcon}#icon-heart\"></use>\n//         </svg>`;\n//     } else {\n//       return `Remove from\n//         <svg class=\"icon-heart\" width=\"18\" height=\"18\">\n//           <use href=\"${heartIcon}#icon-heart\"></use>\n//         </svg>`;\n//     }\n//   }\n  \n  \n  \n\n\n"],"names":["icons","backdrop","modalCard","expectedId","createModalMenu","expectedExercisesId","addToFavoriteOnClick","event","favorites","item","updatedFavorites","responseIdObject","getCardInfo","modalWindowMarkup","error","exerciseId","BASE_URL","ENDPOINT","data","axios","err","_id","bodyPart","equipment","time","target","burnedCalories","gifUrl","name","popularity","rating","description","markup"],"mappings":"yCAAA,MAAeA,EAAA,iDCMC,SAAS,cAAc,UAAU,EACjD,MAAMC,EAAW,SAAS,cAAc,WAAW,EAC7CC,EAAY,SAAS,cAAc,QAAQ,EAC/B,SAAS,cAAc,kBAAkB,EAQ3D,IAAIC,EAEJ,eAAeC,EAAgBC,EAAqB,CAClDF,EAAaE,EACb,GAAI,CAWJ,IAASC,EAAT,SAA8BC,EAAO,CACrC,MAAMC,EAAY,KAAK,MAAM,aAAa,QAAQ,WAAW,CAAC,GAAK,GAInE,GAHF,QAAQ,IAAIA,CAAS,EACAA,EAAU,KAAKC,GAAQA,EAAK,MAAQN,CAAU,EAEjD,CACd,MAAMO,EAAmBF,EAAU,OAAOC,GAAQA,EAAK,MAAQN,CAAU,EACzE,aAAa,QAAQ,YAAa,KAAK,UAAUO,CAAgB,CAAC,EAClE,QAAQ,UAAU,OAAO,aAAa,EACtC,QAAQ,UAAY,mBAAmB,KAAK,CAChD,MAGI,aAAa,QACX,YACA,KAAK,UAAU,CAAC,GAAGF,EAAWG,CAAgB,CAAC,CACrD,EAGI,QAAQ,UAAU,IAAI,aAAa,EACnC,QAAQ,UAAY,mBAAmB,QAAQ,CAE9C,EAhCF,MAAMA,EAAmB,MAAMC,EAAYT,CAAU,EACpD,QAAQ,IAAIQ,CAAgB,EAC5BE,EAAkBF,CAAgB,EACR,SAAS,cAAc,kBAAkB,EAClD,iBAAiB,QAASL,CAAoB,EAC9C,SAAS,cAAc,kBAAkB,EACnD,iBAAiB,QAAS,YAAY,EAC7CL,EAAS,UAAU,OAAO,WAAW,EACrC,QAAQ,IAAIE,CAAU,CA0BvB,OAAQW,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,CAC9C,CACH,CAGA,eAAeF,EAAYG,EAAY,CACrC,QAAQ,IAAIA,CAAU,EACtB,GAAI,CACF,MAAMC,EAAW,sCACXC,EAAW,YACX,CAAE,KAAAC,CAAM,EAAG,MAAMC,EAAM,IAAI,GAAGH,CAAQ,IAAIC,CAAQ,IAAIF,CAAU,EAAE,EACxE,OAAOG,CACR,OAAQE,EAAK,CACZ,QAAQ,MAAMA,CAAG,CAClB,CACH,CAIA,SAASP,EAAkB,CACzB,IAAAQ,EACA,SAAAC,EACA,UAAAC,EACA,KAAAC,EACA,OAAAC,EACA,eAAAC,EACA,OAAAC,EACA,KAAAC,EACA,WAAAC,EACA,OAAAC,EACA,YAAAC,CACF,EAAG,CACD,MAAMC,EACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAM6BhC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAmBX2B,CAAM;AAAA;AAAA;AAAA,2BAGNC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,4CAKaA,CAAI;AAAA;AAAA,+CAEDE,CAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uDAQEL,CAAM;AAAA;AAAA;AAAA;AAAA,uDAINH,CAAQ;AAAA;AAAA;AAAA;AAAA,uDAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,uDAITM,CAAU;AAAA;AAAA;AAAA;AAAA,uDAIVH,CAAc;AAAA;AAAA;AAAA;AAAA,0BAI3CK,CAAW;AAAA;AAAA;AAAA;AAAA,2CAIMV,CAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAMDrB,CAAK;AAAA;AAAA;AAAA,4CAGNqB,CAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAS7CnB,EAAU,UAAY8B,CAExB,CA8Cc,SAAS,iBAAiB,eAAe"}