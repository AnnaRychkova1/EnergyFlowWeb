{"version":3,"file":"exercises-2b23b71c.js","sources":["../../src/js/exercises.js"],"sourcesContent":["import axios from 'axios';\nimport { refs } from './templates/refs.js';\nimport { renderExerciseByFilterName } from './exercises-details.js';\n\nimport { hide, show, showLoader, hideLoader } from './services/visibility';\nimport { scrollTo } from './services/scrollTo.js';\n\nconst BASE_URL = 'https://energyflow.b.goit.study/api';\n\nlet filterDefault = 'Muscles';\nlet currentPage = 1;\nlet currentLimit = 0;\nlet screenWidth = window.innerWidth;\nlet exercisesParamFilter;\nlet exercisesParamName;\n\nconst queryParams = {\n  filter: filterDefault,\n  page: currentPage,\n  limit: currentLimit,\n};\n\nrefs.exercisesBtnEl.addEventListener('click', filterBtnExercises);\nrefs.exercisesGalleryEl.addEventListener('click', filterCartsExercises);\nrefs.paginationEl.addEventListener('click', onPaginationPages);\n\nif (screenWidth < 1440) {\n  currentLimit = 8;\n} else {\n  currentLimit = 12;\n}\n\nasync function getExercisesByFilter() {\n  showLoader(refs.loaderModal);\n  try {\n    const response = await axios.get(`${BASE_URL}/filters`, {\n      params: {\n        filter: filterDefault,\n        page: currentPage,\n        limit: currentLimit,\n      },\n    });\n    hideLoader(refs.loaderModal);\n    return response.data;\n  } catch (error) {\n    console.log(error);\n    hideLoader(refs.loaderModal);\n  }\n}\n\nasync function fetchDefaultMuscles() {\n  try {\n    showLoader(refs.loaderModal);\n    const { results, page, totalPages } = await getExercisesByFilter(\n      queryParams\n    );\n\n    if (results && results.length > 0) {\n      createExercisesByFilterMarkup(results);\n      refs.paginationEl.innerHTML = '';\n      refs.paginationEl.innerHTML = pagesPagination(page, totalPages);\n      hideLoader(refs.loaderModal);\n    } else {\n      console.error('No results found for this filter');\n    }\n  } catch (error) {\n    console.log('Error fetching images:', error);\n    hideLoader(refs.loaderModal);\n  }\n}\n\nfetchDefaultMuscles();\n\nasync function filterBtnExercises(event) {\n  event.preventDefault();\n\n  const query = event.target.dataset.filter;\n\n  filterDefault = query;\n  currentPage = 1;\n  showLoader(refs.loaderModal);\n\n  if (event.target === event.currentTarget) {\n    hideLoader(refs.loaderModal);\n    return;\n  }\n\n  hide(refs.subexercisesFilteredCards);\n  hide(refs.subexercisesSearchForm);\n  hide(refs.exercisesTitleSpan);\n  hide(refs.subexercisesTextNoFound);\n  refs.exercisesGalleryEl.innerHTML = '';\n  refs.exercisesSubtitle.innerHTML = '';\n  refs.subexercisesFilteredCards.innerHTML = '';\n\n  try {\n    const { results, page, totalPages } = await getExercisesByFilter(\n      queryParams\n    );\n    createExercisesByFilterMarkup(results);\n    hideLoader(refs.loaderModal);\n\n    if (query !== 'Body parts') {\n      refs.musclesBtnEl.classList.add('btn-item-active');\n    }\n    if (query !== 'Equipment') {\n      refs.musclesBtnEl.classList.add('btn-item-active');\n    }\n    if (query !== 'Muscles') {\n      refs.musclesBtnEl.classList.remove('btn-item-active');\n    }\n\n    if (totalPages > 1) {\n      refs.paginationEl.innerHTML = pagesPagination(page, totalPages);\n    } else {\n      refs.paginationEl.innerHTML = '';\n    }\n    scrollTo(refs.exercisesContainerEl);\n  } catch (error) {\n    console.log(error);\n    hideLoader(refs.loaderModal);\n  } finally {\n    filterDefault = '';\n  }\n}\n\nfunction createExercisesByFilterMarkup(results) {\n  const markup = results\n    .map(\n      ({ name, filter, imgUrl }) =>\n        `<li class=\"exercises-gallery-item\" data-filter>\n        <img class=\"exercises-gallery-img\" src=\"${imgUrl}\" alt=\"${filter}\">\n        <div class=\"exercises-gallery-text\">\n          <h3 class=\"exercises-gallery-title\">${name}</h3>\n          <p class=\"exercises-gallery-filter\">${filter}</p>\n        </div>\n        </li>`\n    )\n    .join('');\n  refs.exercisesGalleryEl.insertAdjacentHTML('beforeend', markup);\n  hideLoader(refs.loaderModal);\n}\n\nfunction pagesPagination(page, totalPages) {\n  let disabledMoveButton = '';\n  showLoader(refs.loaderModal);\n  for (let i = 1; i <= totalPages; i++) {\n    disabledMoveButton += `<button class=\"button-pagination\" type=\"button\">${i}</button>`;\n    hideLoader(refs.loaderModal);\n  }\n\n  return disabledMoveButton;\n}\n\nasync function onPaginationPages(event) {\n  currentPage = event.target.textContent;\n  refs.exercisesGalleryEl.innerHTML = '';\n  try {\n    showLoader(refs.loaderModal);\n    const { results, page, totalPages } = await getExercisesByFilter(\n      queryParams\n    );\n    createExercisesByFilterMarkup(results);\n    hideLoader(refs.loaderModal);\n    scrollTo(refs.exercisesContainerEl);\n  } catch (error) {\n    console.log(error);\n    hideLoader(refs.loaderModal);\n  }\n}\n\nfunction filterCartsExercises(event) {\n  const exerciseElement = event.target.closest('.exercises-gallery-item');\n  if (exerciseElement) {\n    const name = exerciseElement.querySelector(\n      '.exercises-gallery-title'\n    ).textContent;\n    const filter = exerciseElement.querySelector(\n      '.exercises-gallery-filter'\n    ).textContent;\n    exercisesParamName = name;\n    exercisesParamFilter = filter;\n  }\n  show(refs.exercisesTitleSpan);\n\n  refs.exercisesGalleryEl.innerHTML = '';\n  refs.paginationEl.innerHTML = '';\n  hideLoader(refs.loaderModal);\n  queryParams.filter = '';\n  renderExerciseByFilterName(exercisesParamFilter, exercisesParamName);\n}\n\n// export {};\n"],"names":["BASE_URL","filterDefault","currentPage","currentLimit","screenWidth","exercisesParamFilter","exercisesParamName","queryParams","refs","filterBtnExercises","filterCartsExercises","onPaginationPages","getExercisesByFilter","showLoader","response","axios","hideLoader","error","fetchDefaultMuscles","results","page","totalPages","createExercisesByFilterMarkup","pagesPagination","event","query","hide","scrollTo","markup","name","filter","imgUrl","disabledMoveButton","i","exerciseElement","show","renderExerciseByFilterName"],"mappings":"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"}