{"version":3,"file":"quotes-76ae44ea.js","sources":["../../src/js/quotes.js"],"sourcesContent":["import axios from 'axios';\n\nimport { saveQuoteToLocalStorage } from '/js/templates/localStorage.js';\nimport { refs } from '/js/templates/refs.js';\nimport { hideLoader, showLoader } from '/js/services/visibility.js';\nimport { errorResult } from '/js/services/iziToast.js';\n\nconst BASE_URL = 'https://energyflow.b.goit.study/api';\nconst ENDPOINT_QUOTE = 'quote';\n\n// display quote\nfunction displayQuoteOnPage(quoteData) {\n  const quoteText = document.querySelector('.quote-text');\n  const quoteAuthor = document.querySelector('.quote-author');\n  quoteText.textContent = quoteData.quote;\n  quoteAuthor.textContent = quoteData.author;\n}\n\ngetQuoteOffTheDay();\n\nasync function getQuoteOffTheDay() {\n  const quoteResponse = JSON.parse(localStorage.getItem('quoteResponse'));\n  const savedDate = JSON.parse(localStorage.getItem('savedDate'));\n  const currentDate = new Date();\n  showLoader(refs.loaderModal);\n  try {\n    let quoteData;\n    if (savedDate && quoteResponse) {\n      if (\n        currentDate.getFullYear() === savedDate.year &&\n        currentDate.getMonth() + 1 === savedDate.month &&\n        currentDate.getDate() === savedDate.day\n      ) {\n        // Використовуємо збережену цитату з локального сховища\n        quoteData = quoteResponse;\n      }\n      // Отримуємо нову цитату з сервера\n      quoteData = await fetchQuoteFromServer();\n      saveQuoteToLocalStorage(quoteData);\n    }\n    // Відображаємо цитату на сторінці\n    displayQuoteOnPage(quoteData);\n  } catch (error) {\n    errorResult('Server Quotes did not respond');\n  } finally {\n    hideLoader(refs.loaderModal);\n  }\n}\n\n// request to server\nasync function fetchQuoteFromServer() {\n  const response = await axios.get(`${BASE_URL}/${ENDPOINT_QUOTE}`);\n  return response.data;\n}\n"],"names":["BASE_URL","ENDPOINT_QUOTE","displayQuoteOnPage","quoteData","quoteText","quoteAuthor","getQuoteOffTheDay","quoteResponse","savedDate","currentDate","showLoader","refs","fetchQuoteFromServer","saveQuoteToLocalStorage","errorResult","hideLoader","axios"],"mappings":"mRAOA,MAAMA,EAAW,sCACXC,EAAiB,QAGvB,SAASC,EAAmBC,EAAW,CACrC,MAAMC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAc,SAAS,cAAc,eAAe,EAC1DD,EAAU,YAAcD,EAAU,MAClCE,EAAY,YAAcF,EAAU,MACtC,CAEAG,IAEA,eAAeA,GAAoB,CACjC,MAAMC,EAAgB,KAAK,MAAM,aAAa,QAAQ,eAAe,CAAC,EAChEC,EAAY,KAAK,MAAM,aAAa,QAAQ,WAAW,CAAC,EACxDC,EAAc,IAAI,KACxBC,EAAWC,EAAK,WAAW,EAC3B,GAAI,CACF,IAAIR,EACAK,GAAaD,IAEbE,EAAY,gBAAkBD,EAAU,MACxCC,EAAY,SAAQ,EAAK,IAAMD,EAAU,OACzCC,EAAY,YAAcD,EAAU,MAGpCL,EAAYI,GAGdJ,EAAY,MAAMS,IAClBC,EAAwBV,CAAS,GAGnCD,EAAmBC,CAAS,CAC7B,MAAe,CACdW,EAAY,+BAA+B,CAC/C,QAAY,CACRC,EAAWJ,EAAK,WAAW,CAC5B,CACH,CAGA,eAAeC,GAAuB,CAEpC,OADiB,MAAMI,EAAM,IAAI,GAAGhB,CAAQ,IAAIC,CAAc,EAAE,GAChD,IAClB"}