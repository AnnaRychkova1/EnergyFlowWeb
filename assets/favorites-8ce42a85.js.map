{"version":3,"file":"favorites-8ce42a85.js","sources":["../../src/js/favorites.js"],"sourcesContent":["import { renderModalMenu } from './modal-menu.js';\r\nimport { hide, show } from './services/visibility';\r\nimport { refs } from './templates/refs.js';\r\nimport icons from '/img/icons/symbol-defs.svg';\r\n\r\n// Create favorites list\r\n\r\nconst favorites = localStorage.getItem('favorites');\r\nconst favoriteList = JSON.parse(favorites);\r\nconsole.log(favoriteList);\r\n\r\ncreateFavoritesGallery();\r\n\r\nasync function createFavoritesGallery() {\r\n  try {\r\n    if (!Array.isArray(favoriteList) || favoriteList.length === 0) {\r\n      console.log('Array in local storage is empty or does not exist.');\r\n      show(refs.favoritesMessage);\r\n\r\n      return;\r\n    }\r\n\r\n    if (refs.favoritesMessage) {\r\n      hide(refs.favoritesMessage);\r\n    }\r\n\r\n    if (refs.favoritesGallery) {\r\n      refs.favoritesGallery.innerHTML = '';\r\n    }\r\n\r\n    createMarkupFavorites(favoriteList);\r\n  } catch (error) {\r\n    console.error('Error refreshing gallery:', error);\r\n  }\r\n}\r\n\r\nfunction createMarkupFavorites(favoriteList) {\r\n  const markup = favoriteList\r\n    .map(({ _id, bodyPart, name, target, burnedCalories, time }) => {\r\n      return `\r\n       <li class=\"favorites-gallery-item\" data-id=\"${_id}\" id=\"card-${_id}\">\r\n\r\n        <div class=\"favorites-card-top\">\r\n          <div class=\"favorites-workout-block\">\r\n            <div class=\"workout\">Workout</div>\r\n            <button type=\"button\" data-id=${_id} data-favorites-remove class=\"favorites-remove-btn\">\r\n              <svg class=\"favorites-remove-icon\" width=\"16\" height=\"16\">\r\n                <use href=\"${icons}#icon-basket\"></use>\r\n              </svg>\r\n            </button>\r\n          </div>\r\n          <button class=\"to-favorites-start\" type=\"click\" data-id=${_id}>\r\n            <span data-id=${_id}>Start</span>\r\n            <svg data-id=${_id} class=\"filtered-start\" width=\"16\" height=\"16\">\r\n              <use href=\"${icons}#icon-arrow-right\"></use>\r\n            </svg>\r\n          </button>\r\n        </div>\r\n\r\n        <div class=\"card-box-title\">\r\n          <div class=\"filtered-athlete-box\">\r\n            <svg class=\"filtered-athlete\" width=\"16\" height=\"16\">\r\n              <use href=\"${icons}#icon-Man\"></use>\r\n            </svg>\r\n          </div>\r\n          <h3 class=\"filtered-title\">${\r\n            name.charAt(0).toUpperCase() + name.slice(1)\r\n          }</h3>\r\n        </div>\r\n\r\n         <ul class=\"filtered-description\">\r\n          <li class=\"filtered-descr-item\">\r\n            <p class=\"filtered-descr-title\">Burned calories: <span class=\"filtered-descr-value\">${burnedCalories} / ${time} min</span></p>\r\n          </li>\r\n          <li class=\"filtered-descr-item\">\r\n            <p class=\"filtered-descr-title\">Body part: <span class=\"filtered-descr-value\">${\r\n              bodyPart.charAt(0).toUpperCase() + bodyPart.slice(1)\r\n            }</span></p>\r\n          </li>\r\n          <li class=\"filtered-descr-item\">\r\n            <p class=\"filtered-descr-title\">Target: <span class=\"filtered-descr-value\">${\r\n              target.charAt(0).toUpperCase() + target.slice(1)\r\n            }</span></p>\r\n          </li>\r\n        </ul>\r\n\r\n       </li>`;\r\n    })\r\n    .join('');\r\n  if (refs.favoritesGallery) {\r\n    refs.favoritesGallery.insertAdjacentHTML('beforeend', markup);\r\n  }\r\n\r\n  function addRemoveButtonListeners() {\r\n    const removeButtons = document.querySelectorAll('[data-favorites-remove]');\r\n\r\n    removeButtons.forEach(button => {\r\n      button.addEventListener('click', handleRemoveFavorite);\r\n    });\r\n  }\r\n  addRemoveButtonListeners();\r\n\r\n  function addStartButtonListenners() {\r\n    const startButtons = document.querySelectorAll('.to-favorites-start');\r\n\r\n    startButtons.forEach(button => {\r\n      button.addEventListener('click', handleStartButtons);\r\n    });\r\n  }\r\n\r\n  addStartButtonListenners();\r\n}\r\n\r\nfunction handleRemoveFavorite(event) {\r\n  const button = event.currentTarget;\r\n  const id = button.getAttribute('data-id');\r\n\r\n  // Delete card\r\n  const removedCard = document.getElementById(`card-${id}`);\r\n  if (removedCard) {\r\n    removedCard.remove();\r\n  }\r\n\r\n  // Update favoriteList in LocalStorage\r\n  const updatedFavorites = favoriteList.filter(item => item._id !== id);\r\n  localStorage.setItem('favorites', JSON.stringify(updatedFavorites));\r\n\r\n  // Update favoritesList in the page\r\n  favoriteList.splice(\r\n    favoriteList.findIndex(item => item._id === id),\r\n    1\r\n  );\r\n\r\n  if (favoriteList.length === 0) {\r\n    show(refs.favoritesMessage);\r\n    console.log('Array in local storage is empty or does not exist.');\r\n  }\r\n}\r\n\r\nfunction handleStartButtons(event) {\r\n  console.log(refs.backdrop);\r\n  const button = event.currentTarget;\r\n  const id = button.getAttribute('data-id');\r\n  renderModalMenu(id);\r\n}\r\n\r\n// refs.onStartBtn.addEventListener('click', handleStartButtonClick)\r\n\r\n// function handleStartButtonClick(evt) {\r\n//   if (!evt.target.dataset.id) {\r\n//     return;\r\n//   }\r\n//   showLoader(refs.loaderModal);\r\n//   const exerciseId = evt.target.dataset.id;\r\n//   hide(refs.favoritesGallery);\r\n//   createModalMenu(exerciseId);\r\n// }\r\n\r\n//  Scroll for favorites-gallery\r\n\r\n// function showScroll() {\r\n//   const scrollElement = document.getElementById('.favorites-gallery');\r\n//   element.scrollIntoView({\r\n//     behavior: 'smooth',\r\n//     block: 'start',\r\n//     inline: 'start',\r\n//   });\r\n//   if (storedArray.length > 8)\r\n//     refs.favoritesGallery.scrollTo({\r\n//       top: refs.favoritesGallery.scrollHeight,\r\n//       behavior: 'smooth',\r\n//     });\r\n// }\r\n// function hideScroll() {\r\n//   favoritesGallery.classList.remove('scroll-on');\r\n//   favoritesGallery.classList.remove('favorites-scroll');\r\n//   document\r\n//     .querySelector('.favorites-gallery')\r\n//     .classList.remove('favorites-scroll');\r\n// }\r\n"],"names":["favorites","favoriteList","createFavoritesGallery","show","refs","hide","createMarkupFavorites","error","markup","_id","bodyPart","name","target","burnedCalories","time","icons","addRemoveButtonListeners","button","handleRemoveFavorite","addStartButtonListenners","handleStartButtons","event","id","removedCard","updatedFavorites","item","renderModalMenu"],"mappings":"qLAOA,MAAMA,EAAY,aAAa,QAAQ,WAAW,EAC5CC,EAAe,KAAK,MAAMD,CAAS,EACzC,QAAQ,IAAIC,CAAY,EAExBC,IAEA,eAAeA,GAAyB,CACtC,GAAI,CACF,GAAI,CAAC,MAAM,QAAQD,CAAY,GAAKA,EAAa,SAAW,EAAG,CAC7D,QAAQ,IAAI,oDAAoD,EAChEE,EAAKC,EAAK,gBAAgB,EAE1B,MACD,CAEGA,EAAK,kBACPC,EAAKD,EAAK,gBAAgB,EAGxBA,EAAK,mBACPA,EAAK,iBAAiB,UAAY,IAGpCE,EAAsBL,CAAY,CACnC,OAAQM,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,CACjD,CACH,CAEA,SAASD,EAAsBL,EAAc,CAC3C,MAAMO,EAASP,EACZ,IAAI,CAAC,CAAE,IAAAQ,EAAK,SAAAC,EAAU,KAAAC,EAAM,OAAAC,EAAQ,eAAAC,EAAgB,KAAAC,KAC5C;AAAA,qDACwCL,CAAG,cAAcA,CAAG;AAAA;AAAA;AAAA;AAAA;AAAA,4CAK7BA,CAAG;AAAA;AAAA,6BAElBM,CAAK;AAAA;AAAA;AAAA;AAAA,oEAIkCN,CAAG;AAAA,4BAC3CA,CAAG;AAAA,2BACJA,CAAG;AAAA,2BACHM,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAQLA,CAAK;AAAA;AAAA;AAAA,uCAIpBJ,EAAK,OAAO,CAAC,EAAE,YAAW,EAAKA,EAAK,MAAM,CAAC,CAC5C;AAAA;AAAA;AAAA;AAAA;AAAA,kGAKuFE,CAAc,MAAMC,CAAI;AAAA;AAAA;AAAA,4FAI5GJ,EAAS,OAAO,CAAC,EAAE,YAAW,EAAKA,EAAS,MAAM,CAAC,CACpD;AAAA;AAAA;AAAA,yFAICE,EAAO,OAAO,CAAC,EAAE,YAAW,EAAKA,EAAO,MAAM,CAAC,CAChD;AAAA;AAAA;AAAA;AAAA,aAKR,EACA,KAAK,EAAE,EACNR,EAAK,kBACPA,EAAK,iBAAiB,mBAAmB,YAAaI,CAAM,EAG9D,SAASQ,GAA2B,CACZ,SAAS,iBAAiB,yBAAyB,EAE3D,QAAQC,GAAU,CAC9BA,EAAO,iBAAiB,QAASC,CAAoB,CAC3D,CAAK,CACF,CACDF,IAEA,SAASG,GAA2B,CACb,SAAS,iBAAiB,qBAAqB,EAEvD,QAAQF,GAAU,CAC7BA,EAAO,iBAAiB,QAASG,CAAkB,CACzD,CAAK,CACF,CAEDD,GACF,CAEA,SAASD,EAAqBG,EAAO,CAEnC,MAAMC,EADSD,EAAM,cACH,aAAa,SAAS,EAGlCE,EAAc,SAAS,eAAe,QAAQD,CAAE,EAAE,EACpDC,GACFA,EAAY,OAAM,EAIpB,MAAMC,EAAmBvB,EAAa,OAAOwB,GAAQA,EAAK,MAAQH,CAAE,EACpE,aAAa,QAAQ,YAAa,KAAK,UAAUE,CAAgB,CAAC,EAGlEvB,EAAa,OACXA,EAAa,UAAUwB,GAAQA,EAAK,MAAQH,CAAE,EAC9C,CACJ,EAEMrB,EAAa,SAAW,IAC1BE,EAAKC,EAAK,gBAAgB,EAC1B,QAAQ,IAAI,oDAAoD,EAEpE,CAEA,SAASgB,EAAmBC,EAAO,CACjC,QAAQ,IAAIjB,EAAK,QAAQ,EAEzB,MAAMkB,EADSD,EAAM,cACH,aAAa,SAAS,EACxCK,EAAgBJ,CAAE,CACpB"}