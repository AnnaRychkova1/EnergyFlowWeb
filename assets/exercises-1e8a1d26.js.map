{"version":3,"file":"exercises-1e8a1d26.js","sources":["../../src/js/exercises.js"],"sourcesContent":["import axios from 'axios';\nimport { renderExerciseByFilterName } from '/js/exercises-details.js';\nimport { refs } from '/js/templates/refs.js';\nimport { onPaginationClick, pagesPagination } from '/js/services/pagination.js';\nimport { hide, show, showLoader, hideLoader } from '/js/services/visibility.js';\nimport { scrollTo } from '/js/services/scrollTo.js';\nimport { errorResult } from '/js/services/iziToast.js';\n\nconst BASE_URL = 'https://energyflow.b.goit.study/api';\n\nlet filterDefault = 'Muscles';\nlet page = 1;\nlet currentLimit = 0;\nlet screenWidth = window.innerWidth;\nlet exercisesParamFilter;\nlet exercisesParamName;\n\nconst queryParams = {\n  filter: filterDefault,\n  page: page,\n  limit: currentLimit,\n};\n\nif (screenWidth < 1440) {\n  currentLimit = 8;\n} else {\n  currentLimit = 12;\n}\n\nif (refs.exercisesBtnEl) {\n  refs.exercisesBtnEl.addEventListener('click', filterBtnExercises);\n}\n\nif (refs.exercisesGalleryEl) {\n  refs.exercisesGalleryEl.addEventListener('click', filterCartsExercises);\n}\n\nif (refs.paginationEl) {\n  refs.paginationEl.addEventListener(\n    'click',\n    onPaginationClick(\n      createExercisesByFilterMarkup,\n      getExercisesByFilter,\n      queryParams,\n      refs.exercisesGalleryEl,\n      'first-pagination'\n    )\n  );\n}\n\nfetchDefaultMuscles();\n\n// default request\nasync function fetchDefaultMuscles() {\n  if (refs.paginationEl) {\n    refs.paginationEl.classList.add('first-pagination');\n    refs.paginationEl.classList.remove('second-pagination');\n  }\n  showLoader(refs.loaderModal);\n  try {\n    const { results, totalPages } = await getExercisesByFilter(page);\n\n    if (totalPages > 1 && refs.paginationEl) {\n      refs.paginationEl.innerHTML = pagesPagination(page, totalPages);\n    }\n\n    if (results && results.length > 0) {\n      createExercisesByFilterMarkup(results);\n    } else {\n      errorResult('No results found for this filter');\n    }\n  } catch (error) {\n    errorResult('Server Exercises did not responded');\n  } finally {\n    hideLoader(refs.loaderModal);\n  }\n}\n\n// filter button request\nasync function filterBtnExercises(event) {\n  event.preventDefault();\n\n  const query = event.target.dataset.filter;\n\n  filterDefault = query;\n\n  if (event.target === event.currentTarget) {\n    return;\n  }\n  show(refs.exercisesGalleryEl);\n  hide(refs.subexercisesFilteredCards);\n  hide(refs.subexercisesSearchForm);\n  hide(refs.exercisesTitleSpan);\n  hide(refs.subexercisesTextNoFound);\n  refs.exercisesGalleryEl.innerHTML = '';\n  refs.exercisesSubtitle.innerHTML = '';\n  refs.paginationEl.innerHTML = '';\n  refs.subexercisesFilteredCards.innerHTML = '';\n  refs.paginationEl.classList.add('first-pagination');\n  refs.paginationEl.classList.remove('second-pagination');\n\n  showLoader(refs.loaderModal);\n  try {\n    if (query === 'Body parts') {\n      refs.bodyPartsBtnEl.classList.add('btn-item-active');\n      refs.musclesBtnEl.classList.remove('btn-item-active');\n      refs.equipmentBtnEl.classList.remove('btn-item-active');\n    }\n    if (query === 'Equipment') {\n      refs.equipmentBtnEl.classList.add('btn-item-active');\n      refs.musclesBtnEl.classList.remove('btn-item-active');\n      refs.bodyPartsBtnEl.classList.remove('btn-item-active');\n    }\n    if (query === 'Muscles') {\n      refs.musclesBtnEl.classList.add('btn-item-active');\n      refs.equipmentBtnEl.classList.remove('btn-item-active');\n      refs.bodyPartsBtnEl.classList.remove('btn-item-active');\n    }\n\n    const { results, totalPages } = await getExercisesByFilter(page);\n\n    if (totalPages > 1) {\n      refs.paginationEl.innerHTML = pagesPagination(page, totalPages);\n    }\n\n    if (results && results.length > 0) {\n      createExercisesByFilterMarkup(results);\n    } else {\n      errorResult('No results found for this filter');\n    }\n\n    scrollTo(refs.exercisesContainerEl);\n  } catch (error) {\n    errorResult('Server Exercises did not responded');\n  } finally {\n    hideLoader(refs.loaderModal);\n  }\n}\n\n// request to server\nasync function getExercisesByFilter(page) {\n  const response = await axios.get(`${BASE_URL}/filters`, {\n    params: {\n      filter: filterDefault,\n      page: page,\n      limit: currentLimit,\n    },\n  });\n  return response.data;\n}\n\n// create Markup\nfunction createExercisesByFilterMarkup(results) {\n  const markup = results\n    .map(\n      ({ name, filter, imgUrl }) =>\n        `<li class=\"exercises-gallery-item\" data-filter>\n        <img class=\"exercises-gallery-img\" src=\"${imgUrl}\" alt=\"${filter}\">\n        <div class=\"exercises-gallery-text\">\n          <h3 class=\"exercises-gallery-title\">${name}</h3>\n          <p class=\"exercises-gallery-filter\">${filter}</p>\n        </div>\n        </li>`\n    )\n    .join('');\n\n  if (refs.exercisesGalleryEl) {\n    refs.exercisesGalleryEl.insertAdjacentHTML('beforeend', markup);\n  }\n}\n\n// request for adition info\nfunction filterCartsExercises(event) {\n  const exerciseElement = event.target.closest('.exercises-gallery-item');\n  if (exerciseElement) {\n    const name = exerciseElement.querySelector(\n      '.exercises-gallery-title'\n    ).textContent;\n    const filter = exerciseElement.querySelector(\n      '.exercises-gallery-filter'\n    ).textContent;\n    exercisesParamName = name;\n    exercisesParamFilter = filter;\n  }\n  show(refs.exercisesTitleSpan);\n\n  refs.exercisesGalleryEl.innerHTML = '';\n  refs.paginationEl.innerHTML = '';\n\n  renderExerciseByFilterName(exercisesParamFilter, exercisesParamName);\n}\n"],"names":["BASE_URL","filterDefault","page","currentLimit","screenWidth","exercisesParamFilter","exercisesParamName","queryParams","refs","filterBtnExercises","filterCartsExercises","onPaginationClick","createExercisesByFilterMarkup","getExercisesByFilter","fetchDefaultMuscles","showLoader","results","totalPages","pagesPagination","errorResult","hideLoader","event","query","show","hide","scrollTo","axios","markup","name","filter","imgUrl","exerciseElement","renderExerciseByFilterName"],"mappings":"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"}