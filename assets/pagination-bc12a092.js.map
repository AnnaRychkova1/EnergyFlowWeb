{"version":3,"file":"pagination-bc12a092.js","sources":["../../src/js/services/pagination.js"],"sourcesContent":["import { refs } from '/js/templates/refs.js';\nimport { showLoader, hideLoader } from '/js/services/visibility.js';\nimport { scrollTo } from '/js/services/scrollTo.js';\nimport { errorResult } from '/js/services/iziToast.js';\n\nfunction pagesPagination(page, totalPages) {\n  let buttons = '';\n  const maxVisibleButtons = 3;\n\n  let startButton = Math.max(1, page - 1);\n  let endButton = Math.min(totalPages, startButton + maxVisibleButtons - 1);\n\n  if (startButton > 1) {\n    buttons += `<button class=\"button-pagination prev\" type=\"button\"><<</button>`;\n  }\n\n  for (let i = startButton; i <= endButton; i++) {\n    buttons += `<button class=\"button-pagination ${\n      i === page ? 'active' : ''\n    }\" type=\"button\">${i}</button>`;\n  }\n\n  if (endButton < totalPages) {\n    buttons += `<button class=\"button-pagination next\" type=\"button\">>></button>`;\n  }\n\n  return buttons;\n}\n\nfunction onPaginationClick(\n  createMarkup,\n  requestFunction,\n  params,\n  filledContainer,\n  identifier\n) {\n  let page = 1;\n  return async function onPagination(event) {\n    const button = event.target;\n    if (!button.parentElement.classList.contains(identifier)) {\n      return;\n    }\n\n    if (\n      button.classList.contains('prev') ||\n      button.classList.contains('next')\n    ) {\n      const currentPageButton = refs.paginationEl.querySelector(\n        '.button-pagination.active'\n      );\n      const currentPage = parseInt(currentPageButton.textContent, 10);\n      page = button.classList.contains('prev')\n        ? currentPage - 1\n        : currentPage + 1;\n    } else {\n      page = parseInt(event.target.textContent, 10);\n    }\n\n    params.page = page;\n\n    filledContainer.innerHTML = '';\n\n    showLoader(refs.loaderModal);\n    try {\n      const { results, totalPages } = await requestFunction(page, params);\n\n      if (results && results.length > 0) {\n        createMarkup(results);\n        refs.paginationEl.innerHTML = pagesPagination(page, totalPages);\n        scrollTo(refs.exercisesContainerEl);\n      } else {\n        errorResult('No results found for this exercise');\n      }\n    } catch (error) {\n      errorResult('Server did not responded');\n    } finally {\n      hideLoader(refs.loaderModal);\n    }\n  };\n}\n\nexport { pagesPagination, onPaginationClick };\n"],"names":["pagesPagination","page","totalPages","buttons","startButton","endButton","onPaginationClick","createMarkup","requestFunction","params","filledContainer","identifier","event","button","currentPageButton","refs","currentPage","showLoader","results","scrollTo","errorResult","hideLoader"],"mappings":"oPAKA,SAASA,EAAgBC,EAAMC,EAAY,CACzC,IAAIC,EAAU,GAGVC,EAAc,KAAK,IAAI,EAAGH,EAAO,CAAC,EAClCI,EAAY,KAAK,IAAIH,EAAYE,EAAc,EAAoB,CAAC,EAEpEA,EAAc,IAChBD,GAAW,oEAGb,QAAS,EAAIC,EAAa,GAAKC,EAAW,IACxCF,GAAW,oCACT,IAAMF,EAAO,SAAW,EAC9B,mBAAuB,CAAC,YAGtB,OAAII,EAAYH,IACdC,GAAW,oEAGNA,CACT,CAEA,SAASG,EACPC,EACAC,EACAC,EACAC,EACAC,EACA,CACA,IAAIV,EAAO,EACX,OAAO,eAA4BW,EAAO,CACxC,MAAMC,EAASD,EAAM,OACrB,GAAKC,EAAO,cAAc,UAAU,SAASF,CAAU,EAIvD,IACEE,EAAO,UAAU,SAAS,MAAM,GAChCA,EAAO,UAAU,SAAS,MAAM,EAChC,CACA,MAAMC,EAAoBC,EAAK,aAAa,cAC1C,2BACR,EACYC,EAAc,SAASF,EAAkB,YAAa,EAAE,EAC9Db,EAAOY,EAAO,UAAU,SAAS,MAAM,EACnCG,EAAc,EACdA,EAAc,CACxB,MACMf,EAAO,SAASW,EAAM,OAAO,YAAa,EAAE,EAG9CH,EAAO,KAAOR,EAEdS,EAAgB,UAAY,GAE5BO,EAAWF,EAAK,WAAW,EAC3B,GAAI,CACF,KAAM,CAAE,QAAAG,EAAS,WAAAhB,CAAY,EAAG,MAAMM,EAAgBP,EAAMQ,CAAM,EAE9DS,GAAWA,EAAQ,OAAS,GAC9BX,EAAaW,CAAO,EACpBH,EAAK,aAAa,UAAYf,EAAgBC,EAAMC,CAAU,EAC9DiB,EAASJ,EAAK,oBAAoB,GAElCK,EAAY,oCAAoC,CAEnD,MAAe,CACdA,EAAY,0BAA0B,CAC5C,QAAc,CACRC,EAAWN,EAAK,WAAW,CAC5B,EACL,CACA"}