{"version":3,"file":"exercises-797d66a5.js","sources":["../../src/js/exercises.js"],"sourcesContent":["import axios from 'axios';\nimport { refs } from './templates/refs.js';\nimport { renderExerciseByFilterName } from './exercises-details.js';\n// import { pagesPagination, onPaginationPages } from './services/pagination';\n\nimport { hide, show, showLoader, hideLoader } from './services/visibility';\nimport { scrollTo } from './services/scrollTo.js';\n\nconst BASE_URL = 'https://energyflow.b.goit.study/api';\n\nlet filterDefault = 'Muscles';\nlet page = 1;\nlet currentLimit = 0;\nlet screenWidth = window.innerWidth;\nlet exercisesParamFilter;\nlet exercisesParamName;\n\nconst queryParams = {\n  filter: filterDefault,\n  page: page,\n  limit: currentLimit,\n};\n\nif (screenWidth < 1440) {\n  currentLimit = 8;\n} else {\n  currentLimit = 12;\n}\n\nrefs.exercisesBtnEl.addEventListener('click', filterBtnExercises);\nrefs.exercisesGalleryEl.addEventListener('click', filterCartsExercises);\nrefs.paginationEl.addEventListener('click', onPaginationPages);\n\nfetchDefaultMuscles();\n\nasync function filterBtnExercises(event) {\n  event.preventDefault();\n  queryParams.page = 1;\n  page = 1;\n\n  const query = event.target.dataset.filter;\n\n  filterDefault = query;\n\n  showLoader(refs.loaderModal);\n\n  if (event.target === event.currentTarget) {\n    hideLoader(refs.loaderModal);\n    return;\n  }\n\n  hide(refs.subexercisesFilteredCards);\n  hide(refs.subexercisesSearchForm);\n  hide(refs.exercisesTitleSpan);\n  hide(refs.subexercisesTextNoFound);\n  refs.exercisesGalleryEl.innerHTML = '';\n  refs.exercisesSubtitle.innerHTML = '';\n  refs.subexercisesFilteredCards.innerHTML = '';\n  refs.paginationEl.innerHTML = '';\n\n  try {\n    if (query === 'Body parts') {\n      refs.bodyPartsBtnEl.classList.add('btn-item-active');\n      refs.musclesBtnEl.classList.remove('btn-item-active');\n      refs.equipmentBtnEl.classList.remove('btn-item-active');\n    }\n    if (query === 'Equipment') {\n      refs.equipmentBtnEl.classList.add('btn-item-active');\n      refs.musclesBtnEl.classList.remove('btn-item-active');\n      refs.bodyPartsBtnEl.classList.remove('btn-item-active');\n    }\n    if (query === 'Muscles') {\n      refs.musclesBtnEl.classList.add('btn-item-active');\n      refs.equipmentBtnEl.classList.remove('btn-item-active');\n      refs.bodyPartsBtnEl.classList.remove('btn-item-active');\n    }\n\n    const { results, totalPages } = await getExercisesByFilter();\n\n    if (totalPages > 1) {\n      refs.paginationEl.innerHTML = pagesPagination(page, totalPages);\n    }\n\n    if (results && results.length > 0) {\n      createExercisesByFilterMarkup(results);\n      refs.paginationEl.innerHTML = pagesPagination(page, totalPages);\n      hideLoader(refs.loaderModal);\n    } else {\n      console.error('No results found for this filter');\n    }\n\n    scrollTo(refs.exercisesContainerEl);\n  } catch (error) {\n    console.log(error);\n    hideLoader(refs.loaderModal);\n  }\n}\n\n// default request\nasync function fetchDefaultMuscles() {\n  try {\n    showLoader(refs.loaderModal);\n    const { results, totalPages } = await getExercisesByFilter();\n\n    if (results && results.length > 0) {\n      createExercisesByFilterMarkup(results);\n      hideLoader(refs.loaderModal);\n\n      if (totalPages > 1) {\n        refs.paginationEl.innerHTML = pagesPagination(page, totalPages);\n      }\n    } else {\n      console.error('No results found for this filter');\n    }\n  } catch (error) {\n    console.log('Error fetching images:', error);\n    hideLoader(refs.loaderModal);\n  }\n}\n\n// request for adition info\nfunction filterCartsExercises(event) {\n  const exerciseElement = event.target.closest('.exercises-gallery-item');\n  if (exerciseElement) {\n    const name = exerciseElement.querySelector(\n      '.exercises-gallery-title'\n    ).textContent;\n    const filter = exerciseElement.querySelector(\n      '.exercises-gallery-filter'\n    ).textContent;\n    exercisesParamName = name;\n    exercisesParamFilter = filter;\n  }\n  show(refs.exercisesTitleSpan);\n\n  refs.exercisesGalleryEl.innerHTML = '';\n  refs.paginationEl.innerHTML = '';\n  hideLoader(refs.loaderModal);\n  renderExerciseByFilterName(exercisesParamFilter, exercisesParamName);\n}\n\n// request function\nasync function getExercisesByFilter() {\n  showLoader(refs.loaderModal);\n  try {\n    const response = await axios.get(`${BASE_URL}/filters`, {\n      params: {\n        filter: filterDefault,\n        page: page,\n        limit: currentLimit,\n      },\n    });\n    hideLoader(refs.loaderModal);\n    return response.data;\n  } catch (error) {\n    console.log(error);\n    hideLoader(refs.loaderModal);\n  }\n}\n// create Markup\nfunction createExercisesByFilterMarkup(results) {\n  const markup = results\n    .map(\n      ({ name, filter, imgUrl }) =>\n        `<li class=\"exercises-gallery-item\" data-filter>\n        <img class=\"exercises-gallery-img\" src=\"${imgUrl}\" alt=\"${filter}\">\n        <div class=\"exercises-gallery-text\">\n          <h3 class=\"exercises-gallery-title\">${name}</h3>\n          <p class=\"exercises-gallery-filter\">${filter}</p>\n        </div>\n        </li>`\n    )\n    .join('');\n  refs.exercisesGalleryEl.insertAdjacentHTML('beforeend', markup);\n  hideLoader(refs.loaderModal);\n}\n\n// pagination\nfunction pagesPagination(page, totalPages) {\n  let buttons = '';\n  const maxVisibleButtons = 3;\n\n  let startButton = Math.max(1, page - 1);\n  let endButton = Math.min(totalPages, startButton + maxVisibleButtons - 1);\n\n  if (startButton > 1) {\n    buttons += `<button class=\"button-pagination prev\" type=\"button\">+</button>`;\n  }\n\n  for (let i = startButton; i <= endButton; i++) {\n    buttons += `<button class=\"button-pagination ${\n      i === page ? 'active' : ''\n    }\" type=\"button\">${i}</button>`;\n  }\n\n  if (endButton < totalPages) {\n    buttons += `<button class=\"button-pagination next\" type=\"button\">+</button>`;\n  }\n\n  return buttons;\n}\n\nasync function onPaginationPages(event) {\n  const button = event.target;\n\n  if (button.classList.contains('prev') || button.classList.contains('next')) {\n    const currentPageButton = refs.paginationEl.querySelector(\n      '.button-pagination.active'\n    );\n    const currentPage = parseInt(currentPageButton.textContent, 10);\n    const newPage = button.classList.contains('prev')\n      ? currentPage - 1\n      : currentPage + 1;\n    page = newPage;\n  } else {\n    page = parseInt(event.target.textContent, 10);\n  }\n\n  refs.exercisesGalleryEl.innerHTML = '';\n\n  try {\n    showLoader(refs.loaderModal);\n    const { results, totalPages } = await getExercisesByFilter();\n    queryParams.page = page;\n    createExercisesByFilterMarkup(results);\n    hideLoader(refs.loaderModal);\n    refs.paginationEl.innerHTML = pagesPagination(page, totalPages);\n    scrollTo(refs.exercisesContainerEl);\n  } catch (error) {\n    console.log(error);\n    hideLoader(refs.loaderModal);\n  }\n}\n\n// export {};\n"],"names":["BASE_URL","filterDefault","page","currentLimit","screenWidth","exercisesParamFilter","exercisesParamName","queryParams","refs","filterBtnExercises","filterCartsExercises","onPaginationPages","fetchDefaultMuscles","event","query","showLoader","hideLoader","hide","results","totalPages","getExercisesByFilter","pagesPagination","createExercisesByFilterMarkup","scrollTo","error","exerciseElement","name","filter","show","renderExerciseByFilterName","response","axios","markup","imgUrl","buttons","startButton","endButton","i","button","currentPageButton","currentPage"],"mappings":"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"}